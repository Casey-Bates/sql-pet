<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R, Databases and Docker</title>
  <meta name="description" content="A collection of tutorials for integrating R with databases using Docker">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R, Databases and Docker" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R, Databases and Docker" />
  
  <meta name="twitter:description" content="A collection of tutorials for integrating R with databases using Docker" />
  

<meta name="author" content="Dipti Muni, Ian Frantz, John David Smith, Mary Anne Thygesen, M. Edward (Ed) Borasky, Scott Case, and Sophie Yang">


<meta name="date" content="2018-10-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="sql-quick-start-simple-retrieval.html">
<link rel="next" href="getting-metadata-about-and-from-the-database-21.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R, Databases and Docker</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#using-r-to-query-a-dbms-in-your-organization"><i class="fa fa-check"></i><b>1.1</b> Using R to query a DBMS in your organization</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#docker-as-a-tool-for-users"><i class="fa fa-check"></i><b>1.2</b> Docker as a tool for UseRs</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#docker-and-r-on-your-machine"><i class="fa fa-check"></i><b>1.3</b> Docker and R on your machine</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#who-are-we"><i class="fa fa-check"></i><b>1.4</b> Who are we?</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.5</b> Prerequisites</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#install-docker"><i class="fa fa-check"></i><b>1.6</b> Install Docker</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#download-the-repo"><i class="fa fa-check"></i><b>1.7</b> Download the repo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html"><i class="fa fa-check"></i><b>2</b> Docker Hosting for Windows (02)</a><ul>
<li class="chapter" data-level="2.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#hardware-requirements"><i class="fa fa-check"></i><b>2.1</b> Hardware requirements</a></li>
<li class="chapter" data-level="2.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#software-requirements"><i class="fa fa-check"></i><b>2.2</b> Software requirements</a><ul>
<li class="chapter" data-level="2.2.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-7-8-8.1-and-windows-10-home-64-bit"><i class="fa fa-check"></i><b>2.2.1</b> Windows 7, 8, 8.1 and Windows 10 Home (64 bit)</a></li>
<li class="chapter" data-level="2.2.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#windows-10-pro"><i class="fa fa-check"></i><b>2.2.2</b> Windows 10 Pro</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#docker-for-windows-settings"><i class="fa fa-check"></i><b>2.3</b> Docker for Windows settings</a><ul>
<li class="chapter" data-level="2.3.1" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#shared-drives"><i class="fa fa-check"></i><b>2.3.1</b> Shared drives</a></li>
<li class="chapter" data-level="2.3.2" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#kubernetes"><i class="fa fa-check"></i><b>2.3.2</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="docker-hosting-for-windows-02.html"><a href="docker-hosting-for-windows-02.html#git-github-and-line-endings"><i class="fa fa-check"></i><b>2.4</b> Git, GitHub and line endings</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="learning-goals-and-use-cases.html"><a href="learning-goals-and-use-cases.html"><i class="fa fa-check"></i><b>3</b> Learning Goals and Use Cases</a><ul>
<li class="chapter" data-level="3.1" data-path="learning-goals-and-use-cases.html"><a href="learning-goals-and-use-cases.html#context-why-integrate-r-with-databases-using-docker-03"><i class="fa fa-check"></i><b>3.1</b> Context: Why integrate R with databases using Docker? (03)</a></li>
<li class="chapter" data-level="3.2" data-path="learning-goals-and-use-cases.html"><a href="learning-goals-and-use-cases.html#learning-goals"><i class="fa fa-check"></i><b>3.2</b> Learning Goals</a></li>
<li class="chapter" data-level="3.3" data-path="learning-goals-and-use-cases.html"><a href="learning-goals-and-use-cases.html#use-cases"><i class="fa fa-check"></i><b>3.3</b> Use cases</a></li>
<li class="chapter" data-level="3.4" data-path="learning-goals-and-use-cases.html"><a href="learning-goals-and-use-cases.html#erd-diagram"><i class="fa fa-check"></i><b>3.4</b> ERD Diagram</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html"><i class="fa fa-check"></i><b>4</b> Docker, Postgres, and R (04)</a><ul>
<li class="chapter" data-level="4.1" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#verify-that-docker-is-running"><i class="fa fa-check"></i><b>4.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="4.2" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#clean-up-if-appropriate"><i class="fa fa-check"></i><b>4.2</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="4.3" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#connect-read-and-write-to-postgres-from-r"><i class="fa fa-check"></i><b>4.3</b> Connect, read and write to Postgres from R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#pause-for-some-security-considerations"><i class="fa fa-check"></i><b>4.3.1</b> Pause for some security considerations</a></li>
<li class="chapter" data-level="4.3.2" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#alternative-put-the-database-password-in-an-environment-file"><i class="fa fa-check"></i><b>4.3.2</b> Alternative: put the database password in an environment file</a></li>
<li class="chapter" data-level="4.3.3" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#interact-with-postgres"><i class="fa fa-check"></i><b>4.3.3</b> Interact with Postgres</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="docker-postgres-and-r-04.html"><a href="docker-postgres-and-r-04.html#clean-up"><i class="fa fa-check"></i><b>4.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><i class="fa fa-check"></i><b>5</b> A persistent database in Postgres in Docker - all at once (05)</a><ul>
<li class="chapter" data-level="5.1" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#verify-that-docker-is-up-and-running"><i class="fa fa-check"></i><b>5.2</b> Verify that Docker is up and running</a></li>
<li class="chapter" data-level="5.3" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#clean-up-if-appropriate-1"><i class="fa fa-check"></i><b>5.3</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="5.4" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#build-the-docker-image"><i class="fa fa-check"></i><b>5.4</b> Build the Docker Image</a></li>
<li class="chapter" data-level="5.5" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#run-the-docker-image"><i class="fa fa-check"></i><b>5.5</b> Run the Docker Image</a></li>
<li class="chapter" data-level="5.6" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#connect-to-postgres-with-r"><i class="fa fa-check"></i><b>5.6</b> Connect to Postgres with R</a></li>
<li class="chapter" data-level="5.7" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#stop-and-start-to-demonstrate-persistence"><i class="fa fa-check"></i><b>5.7</b> Stop and start to demonstrate persistence</a></li>
<li class="chapter" data-level="5.8" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#cleaning-up"><i class="fa fa-check"></i><b>5.8</b> Cleaning up</a></li>
<li class="chapter" data-level="5.9" data-path="a-persistent-database-in-postgres-in-docker-all-at-once-05.html"><a href="a-persistent-database-in-postgres-in-docker-all-at-once-05.html#using-the-sql-pet-container-in-the-rest-of-the-book"><i class="fa fa-check"></i><b>5.9</b> Using the <code>sql-pet</code> container in the rest of the book</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html"><i class="fa fa-check"></i><b>6</b> Mapping your local environment (10)</a><ul>
<li class="chapter" data-level="6.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#tutorial-environment"><i class="fa fa-check"></i><b>6.1</b> Tutorial Environment</a></li>
<li class="chapter" data-level="6.2" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#communicating-with-docker-applications"><i class="fa fa-check"></i><b>6.2</b> Communicating with Docker Applications</a></li>
<li class="chapter" data-level="6.3" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#exercises"><i class="fa fa-check"></i><b>6.3</b> Exercises</a><ul>
<li class="chapter" data-level="6.3.1" data-path="mapping-your-local-environment-10.html"><a href="mapping-your-local-environment-10.html#docker-help"><i class="fa fa-check"></i><b>6.3.1</b> Docker Help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-postgres-queries-from-r-10.html"><a href="introduction-postgres-queries-from-r-10.html"><i class="fa fa-check"></i><b>7</b> Introduction: Postgres queries from R (10)</a><ul>
<li class="chapter" data-level="7.1" data-path="introduction-postgres-queries-from-r-10.html"><a href="introduction-postgres-queries-from-r-10.html#basics"><i class="fa fa-check"></i><b>7.1</b> Basics</a></li>
<li class="chapter" data-level="7.2" data-path="introduction-postgres-queries-from-r-10.html"><a href="introduction-postgres-queries-from-r-10.html#ask-yourself-what-are-you-aiming-for"><i class="fa fa-check"></i><b>7.2</b> Ask yourself, what are you aiming for?</a></li>
<li class="chapter" data-level="7.3" data-path="introduction-postgres-queries-from-r-10.html"><a href="introduction-postgres-queries-from-r-10.html#get-some-basic-information-about-your-database"><i class="fa fa-check"></i><b>7.3</b> Get some basic information about your database</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="explain-queries-11.html"><a href="explain-queries-11.html"><i class="fa fa-check"></i><b>8</b> Explain queries (11)</a></li>
<li class="chapter" data-level="9" data-path="simple-queries-11.html"><a href="simple-queries-11.html"><i class="fa fa-check"></i><b>9</b> Simple queries (11)</a><ul>
<li class="chapter" data-level="9.1" data-path="simple-queries-11.html"><a href="simple-queries-11.html#some-extra-handy-libraries"><i class="fa fa-check"></i><b>9.1</b> Some extra handy libraries</a></li>
<li class="chapter" data-level="9.2" data-path="simple-queries-11.html"><a href="simple-queries-11.html#basic-investigation"><i class="fa fa-check"></i><b>9.2</b> Basic investigation</a></li>
<li class="chapter" data-level="9.3" data-path="simple-queries-11.html"><a href="simple-queries-11.html#using-dplyr"><i class="fa fa-check"></i><b>9.3</b> Using <code>dplyr</code></a><ul>
<li class="chapter" data-level="9.3.1" data-path="simple-queries-11.html"><a href="simple-queries-11.html#finding-out-whats-in-the-database"><i class="fa fa-check"></i><b>9.3.1</b> Finding out what’s in the database</a></li>
<li class="chapter" data-level="9.3.2" data-path="simple-queries-11.html"><a href="simple-queries-11.html#sample-query"><i class="fa fa-check"></i><b>9.3.2</b> Sample query</a></li>
<li class="chapter" data-level="9.3.3" data-path="simple-queries-11.html"><a href="simple-queries-11.html#subset-only-retrieve-what-you-need"><i class="fa fa-check"></i><b>9.3.3</b> Subset: only retrieve what you need</a></li>
<li class="chapter" data-level="9.3.4" data-path="simple-queries-11.html"><a href="simple-queries-11.html#make-the-server-do-as-much-work-as-you-can"><i class="fa fa-check"></i><b>9.3.4</b> Make the server do as much work as you can</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="simple-queries-11.html"><a href="simple-queries-11.html#what-is-dplyr-sending-to-the-server"><i class="fa fa-check"></i><b>9.4</b> What is <code>dplyr</code> sending to the server?</a></li>
<li class="chapter" data-level="9.5" data-path="simple-queries-11.html"><a href="simple-queries-11.html#writing-sql-queries-directly-to-the-dbms"><i class="fa fa-check"></i><b>9.5</b> Writing SQL queries directly to the DBMS</a></li>
<li class="chapter" data-level="9.6" data-path="simple-queries-11.html"><a href="simple-queries-11.html#choosing-between-dplyr-and-native-sql"><i class="fa fa-check"></i><b>9.6</b> Choosing between <code>dplyr</code> and native SQL</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="postgres-examples-part-b-14.html"><a href="postgres-examples-part-b-14.html"><i class="fa fa-check"></i><b>10</b> Postgres Examples, part B (14)</a><ul>
<li class="chapter" data-level="10.1" data-path="postgres-examples-part-b-14.html"><a href="postgres-examples-part-b-14.html#verify-docker-is-up-and-running"><i class="fa fa-check"></i><b>10.1</b> Verify Docker is up and running:</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html"><i class="fa fa-check"></i><b>11</b> SQL Quick start - simple retrieval</a><ul>
<li class="chapter" data-level="11.1" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#sql-commands"><i class="fa fa-check"></i><b>11.1</b> SQL Commands</a></li>
<li class="chapter" data-level="11.2" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#section"><i class="fa fa-check"></i><b>11.2</b> </a><ul>
<li class="chapter" data-level="11.2.1" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#select-clause-column-selection-vertical-partioning-of-data"><i class="fa fa-check"></i><b>11.2.1</b> SELECT Clause: Column Selection – Vertical Partioning of Data</a></li>
<li class="chapter" data-level="11.2.2" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#sql-comments"><i class="fa fa-check"></i><b>11.2.2</b> SQL Comments</a></li>
<li class="chapter" data-level="11.2.3" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#from-clause"><i class="fa fa-check"></i><b>11.2.3</b> FROM Clause</a></li>
<li class="chapter" data-level="11.2.4" data-path="sql-quick-start-simple-retrieval.html"><a href="sql-quick-start-simple-retrieval.html#where-clause-row-selection-horizontal-partitioning-of-data"><i class="fa fa-check"></i><b>11.2.4</b> WHERE Clause: Row Selection – Horizontal Partitioning of Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="drilling-into-your-db-environment.html"><a href="drilling-into-your-db-environment.html"><i class="fa fa-check"></i><b>12</b> Drilling into Your DB Environment</a><ul>
<li class="chapter" data-level="12.0.1" data-path="drilling-into-your-db-environment.html"><a href="drilling-into-your-db-environment.html#which-database"><i class="fa fa-check"></i><b>12.0.1</b> Which database?</a></li>
<li class="chapter" data-level="12.0.2" data-path="drilling-into-your-db-environment.html"><a href="drilling-into-your-db-environment.html#how-many-databases-reside-in-the-docker-container"><i class="fa fa-check"></i><b>12.0.2</b> How many databases reside in the Docker Container?</a></li>
<li class="chapter" data-level="12.0.3" data-path="drilling-into-your-db-environment.html"><a href="drilling-into-your-db-environment.html#which-schema"><i class="fa fa-check"></i><b>12.0.3</b> Which Schema?</a></li>
<li class="chapter" data-level="12.0.4" data-path="drilling-into-your-db-environment.html"><a href="drilling-into-your-db-environment.html#exercises-1"><i class="fa fa-check"></i><b>12.0.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html"><i class="fa fa-check"></i><b>13</b> Getting metadata about and from the database (21)</a><ul>
<li class="chapter" data-level="13.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#always-look-at-the-data"><i class="fa fa-check"></i><b>13.1</b> Always <em>look</em> at the data</a><ul>
<li class="chapter" data-level="13.1.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#connect-with-people-who-own-generate-or-are-the-subjects-of-the-data"><i class="fa fa-check"></i><b>13.1.1</b> Connect with people who own, generate, or are the subjects of the data</a></li>
<li class="chapter" data-level="13.1.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#browse-a-few-rows-of-a-table"><i class="fa fa-check"></i><b>13.1.2</b> Browse a few rows of a table</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-contents-and-structure"><i class="fa fa-check"></i><b>13.2</b> Database contents and structure</a><ul>
<li class="chapter" data-level="13.2.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-structure"><i class="fa fa-check"></i><b>13.2.1</b> Database structure</a></li>
<li class="chapter" data-level="13.2.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#contents-of-the-information_schema"><i class="fa fa-check"></i><b>13.2.2</b> Contents of the <code>information_schema</code></a></li>
<li class="chapter" data-level="13.2.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-tables-are-in-the-database"><i class="fa fa-check"></i><b>13.2.3</b> What tables are in the database?</a></li>
<li class="chapter" data-level="13.2.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#digging-into-the-information_schema"><i class="fa fa-check"></i><b>13.2.4</b> Digging into the <code>information_schema</code></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-columns-do-those-tables-contain"><i class="fa fa-check"></i><b>13.3</b> What columns do those tables contain?</a><ul>
<li class="chapter" data-level="13.3.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-is-the-difference-between-a-view-and-a-base-table"><i class="fa fa-check"></i><b>13.3.1</b> What is the difference between a <code>VIEW</code> and a <code>BASE TABLE</code>?</a></li>
<li class="chapter" data-level="13.3.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#what-data-types-are-found-in-the-database"><i class="fa fa-check"></i><b>13.3.2</b> What data types are found in the database?</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#characterizing-how-things-are-named"><i class="fa fa-check"></i><b>13.4</b> Characterizing how things are named</a><ul>
<li class="chapter" data-level="13.4.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#counting-columns-and-name-reuse"><i class="fa fa-check"></i><b>13.4.1</b> Counting columns and name reuse</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys"><i class="fa fa-check"></i><b>13.5</b> Database keys</a><ul>
<li class="chapter" data-level="13.5.1" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#direct-sql"><i class="fa fa-check"></i><b>13.5.1</b> Direct SQL</a></li>
<li class="chapter" data-level="13.5.2" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#database-keys-with-dplyr"><i class="fa fa-check"></i><b>13.5.2</b> Database keys with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="getting-metadata-about-and-from-the-database-21.html"><a href="getting-metadata-about-and-from-the-database-21.html#creating-your-own-data-dictionary"><i class="fa fa-check"></i><b>13.6</b> Creating your own data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="explain-queries-71.html"><a href="explain-queries-71.html"><i class="fa fa-check"></i><b>14</b> Explain queries (71)</a><ul>
<li class="chapter" data-level="14.1" data-path="explain-queries-71.html"><a href="explain-queries-71.html#performance-considerations"><i class="fa fa-check"></i><b>14.1</b> Performance considerations</a></li>
<li class="chapter" data-level="14.2" data-path="explain-queries-71.html"><a href="explain-queries-71.html#clean-up-1"><i class="fa fa-check"></i><b>14.2</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html"><i class="fa fa-check"></i><b>15</b> SQL queries behind the scenes (72)</a><ul>
<li class="chapter" data-level="15.1" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#sql-execution-steps"><i class="fa fa-check"></i><b>15.1</b> SQL Execution Steps</a></li>
<li class="chapter" data-level="15.2" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#passing-values-to-sql-statements"><i class="fa fa-check"></i><b>15.2</b> Passing values to SQL statements</a></li>
<li class="chapter" data-level="15.3" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#pass-multiple-sets-of-values-with-dbbind"><i class="fa fa-check"></i><b>15.3</b> Pass multiple sets of values with dbBind():</a></li>
<li class="chapter" data-level="15.4" data-path="sql-queries-behind-the-scenes-72.html"><a href="sql-queries-behind-the-scenes-72.html#clean-up-2"><i class="fa fa-check"></i><b>15.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html"><i class="fa fa-check"></i><b>16</b> Writing to the DBMS (73)</a><ul>
<li class="chapter" data-level="16.1" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#create-a-new-table"><i class="fa fa-check"></i><b>16.1</b> create a new table</a></li>
<li class="chapter" data-level="16.2" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#modify-an-existing-table"><i class="fa fa-check"></i><b>16.2</b> Modify an existing table</a></li>
<li class="chapter" data-level="16.3" data-path="writing-to-the-dbms-73.html"><a href="writing-to-the-dbms-73.html#clean-up-3"><i class="fa fa-check"></i><b>16.3</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="other-resources.html"><a href="other-resources.html"><i class="fa fa-check"></i><b>17</b> Other resources</a><ul>
<li class="chapter" data-level="17.1" data-path="other-resources.html"><a href="other-resources.html#editing-this-book"><i class="fa fa-check"></i><b>17.1</b> Editing this book</a></li>
<li class="chapter" data-level="17.2" data-path="other-resources.html"><a href="other-resources.html#docker-alternatives"><i class="fa fa-check"></i><b>17.2</b> Docker alternatives</a></li>
<li class="chapter" data-level="17.3" data-path="other-resources.html"><a href="other-resources.html#docker-and-r"><i class="fa fa-check"></i><b>17.3</b> Docker and R</a></li>
<li class="chapter" data-level="17.4" data-path="other-resources.html"><a href="other-resources.html#documentation-for-docker-and-postgres"><i class="fa fa-check"></i><b>17.4</b> Documentation for Docker and Postgres</a></li>
<li class="chapter" data-level="17.5" data-path="other-resources.html"><a href="other-resources.html#more-resources"><i class="fa fa-check"></i><b>17.5</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="18" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html"><i class="fa fa-check"></i><b>18</b> Mapping your local environment (92)</a><ul>
<li class="chapter" data-level="18.1" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html#environment-tools-used-in-this-chapter"><i class="fa fa-check"></i><b>18.1</b> Environment Tools Used in this Chapter</a></li>
<li class="chapter" data-level="18.2" data-path="mapping-your-local-environment-92.html"><a href="mapping-your-local-environment-92.html#communicating-with-docker-applications-1"><i class="fa fa-check"></i><b>18.2</b> Communicating with Docker Applications</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R, Databases and Docker</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="drilling-into-your-db-environment" class="section level1">
<h1><span class="header-section-number">Chapter 12</span> Drilling into Your DB Environment</h1>
<p>Start up the <code>docker-pet</code> container</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">sp_docker_start</span>(<span class="st">&quot;sql-pet&quot;</span>)</a></code></pre></div>
<p>Now connect to the <code>dvdrental</code> database with R</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb143-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb143-3" data-line-number="3">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb143-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb143-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb143-6" data-line-number="6">con</a></code></pre></div>
<pre><code>## &lt;PqConnection&gt; dvdrental@localhost:5432</code></pre>
<div id="which-database" class="section level3">
<h3><span class="header-section-number">12.0.1</span> Which database?</h3>
<p>Your DBA will create your user accounts and priviledges for the database(s) that you can access.</p>
<p>One of the challenges when working with a database(s) is finding where your data actually resides. Your best resources will be one or more subject matter experts, <code>SME</code>, and your DBA. Your data may actually reside in multiple databases, e.g., a detail and summary databases. In our tutorial, we focus on the one database, <code>dvdrental</code>. Database names usually reflect something about the data that they contain.</p>
<p>Your laptop is a server for the Docker Postgres databases. A database is a collection of files that Postgres manages in the background.</p>
</div>
<div id="how-many-databases-reside-in-the-docker-container" class="section level3">
<h3><span class="header-section-number">12.0.2</span> How many databases reside in the Docker Container?</h3>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">rs &lt;-</a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb145-3" data-line-number="3">  con,</a>
<a class="sourceLine" id="cb145-4" data-line-number="4">  <span class="st">&quot;SELECT &#39;DB Names in Docker&#39; showing</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="st">          ,datname DB</span></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="st">     FROM pg_database</span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="st">    WHERE datistemplate = false;</span></a>
<a class="sourceLine" id="cb145-8" data-line-number="8"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb145-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb145-10" data-line-number="10"><span class="kw">kable</span>(rs)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DB Names in Docker</td>
<td align="left">postgres</td>
</tr>
<tr class="even">
<td align="left">DB Names in Docker</td>
<td align="left">dvdrental</td>
</tr>
</tbody>
</table>
<p>Which databases are available?</p>
<pre><code>Modify the connection call to connect to the `postgres` database.</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb147-2" data-line-number="2">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb147-3" data-line-number="3">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb147-4" data-line-number="4">  <span class="dt">dbname =</span> <span class="st">&quot;your code goes here&quot;</span>,</a>
<a class="sourceLine" id="cb147-5" data-line-number="5">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb147-6" data-line-number="6"></a>
<a class="sourceLine" id="cb147-7" data-line-number="7">con</a></code></pre></div>
<pre><code>## [1] &quot;There is no connection&quot;</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="cf">if</span> (con <span class="op">!=</span><span class="st"> &#39;There is no connection&#39;</span>)</a>
<a class="sourceLine" id="cb149-2" data-line-number="2">    <span class="kw">dbDisconnect</span>(con)</a>
<a class="sourceLine" id="cb149-3" data-line-number="3"></a>
<a class="sourceLine" id="cb149-4" data-line-number="4"><span class="co">#Answer: con &lt;PqConnection&gt; postgres@localhost:5432</span></a>
<a class="sourceLine" id="cb149-5" data-line-number="5"></a>
<a class="sourceLine" id="cb149-6" data-line-number="6"><span class="co"># Reconnect to dvdrental</span></a>
<a class="sourceLine" id="cb149-7" data-line-number="7"></a>
<a class="sourceLine" id="cb149-8" data-line-number="8">con &lt;-<span class="st"> </span><span class="kw">sp_get_postgres_connection</span>(</a>
<a class="sourceLine" id="cb149-9" data-line-number="9">  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),</a>
<a class="sourceLine" id="cb149-10" data-line-number="10">  <span class="dt">password =</span>  <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),</a>
<a class="sourceLine" id="cb149-11" data-line-number="11">  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,</a>
<a class="sourceLine" id="cb149-12" data-line-number="12">  <span class="dt">seconds_to_test =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb149-13" data-line-number="13">con</a></code></pre></div>
<pre><code>## &lt;PqConnection&gt; dvdrental@localhost:5432</code></pre>
<p>Note that the two Sys.getenv function calls work in this tutorial because both the user and password are available in both databases. This is a common practice in organinzations that have implemented single sign on across their organization.</p>
<pre><code>Gotcha:

   If one has data in multiple databases or multiple environments, Development, Integration, and Prodution, it is very easy to connect to the wrong database in the wrong environment.  Always double check your connection information when logging in and before performing any inserts, updates, or deletes against the database.</code></pre>
<p>The following code block should be used to reduce propagating the above gotcha. Current_database(), CURRENT_DATE or CURRENT_TIMESTAMP, and ‘result set’ are the most useful and last three not so much. Instead of the host IP address having the actual hostname would be a nice addition.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1">rs1 &lt;-</a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb152-3" data-line-number="3">  con,</a>
<a class="sourceLine" id="cb152-4" data-line-number="4">  <span class="st">&quot;SELECT current_database() DB</span></a>
<a class="sourceLine" id="cb152-5" data-line-number="5"><span class="st">         ,CURRENT_DATE</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6"><span class="st">         ,CURRENT_TIMESTAMP</span></a>
<a class="sourceLine" id="cb152-7" data-line-number="7"><span class="st">         ,&#39;result set description&#39; showing</span></a>
<a class="sourceLine" id="cb152-8" data-line-number="8"><span class="st">         ,session_user</span></a>
<a class="sourceLine" id="cb152-9" data-line-number="9"><span class="st">         ,inet_server_addr() host</span></a>
<a class="sourceLine" id="cb152-10" data-line-number="10"><span class="st">         ,inet_server_port() port</span></a>
<a class="sourceLine" id="cb152-11" data-line-number="11"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb152-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb152-13" data-line-number="13"><span class="kw">kable</span>(display_rows)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>Since we will only be working in the <code>dvdrental</code> database in this tutorial and reduce the number of output columns shown, only the ‘result set description’ will be used.</p>
</div>
<div id="which-schema" class="section level3">
<h3><span class="header-section-number">12.0.3</span> Which Schema?</h3>
<p>In the code block below, we look at the <code>information_schema.table</code> which contains information about all the schemas and table/views within our dvdrental database. Databases can have one or more schemas, containers that hold tables or views. Schemas partition the database into big logical blocks of related data. Schema names usually reflect an application or logically related datasets. Occasionally a DBA will set up a new schema and use a users name.</p>
<p>What schemas are in the <code>dvdrental</code> database?
How many entries are in each schema?</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1">## Database Schemas</a>
<a class="sourceLine" id="cb153-2" data-line-number="2"><span class="co">#  </span></a>
<a class="sourceLine" id="cb153-3" data-line-number="3">rs1 &lt;-</a>
<a class="sourceLine" id="cb153-4" data-line-number="4"><span class="st">  </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(</a>
<a class="sourceLine" id="cb153-5" data-line-number="5">  con,</a>
<a class="sourceLine" id="cb153-6" data-line-number="6">  <span class="st">&quot;SELECT &#39;DB Schemas&#39; showing,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws</span></a>
<a class="sourceLine" id="cb153-7" data-line-number="7"><span class="st">     FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb153-8" data-line-number="8"><span class="st">    GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb153-9" data-line-number="9"><span class="st">  &quot;</span></a>
<a class="sourceLine" id="cb153-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb153-11" data-line-number="11"><span class="kw">kable</span>(rs1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">DB Schemas</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<p>We see that there are three schemas. The pg_catalog is the standard PostgreSQL meta data and core schema. Postgres uses this schema to manage the internal workings of the database. DBA’s are the primary users of pg_catalog. We used the pg_catalog schema to answer the question ‘How many databases reside in the Docker Container?’, but normally the data analyst is not interested in analyzing database data.</p>
<p>The information_schema contains ANSI standardized views used across the different SQL vendors, (Oracle, Sysbase, MS SQL Server, IBM DB2, etc). The information_schema contains a plethora of metadata that will help you locate your data tables, understand the relationships between the tables, and write efficient SQL queries.</p>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">12.0.4</span> Exercises</h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="co"># Add an order by clause to order the output by the table catalog.</span></a>
<a class="sourceLine" id="cb154-3" data-line-number="3">rs1 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;1. ORDER BY table_catalog&#39; showing</span></a>
<a class="sourceLine" id="cb154-4" data-line-number="4"><span class="st">                                  ,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws </span></a>
<a class="sourceLine" id="cb154-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb154-6" data-line-number="6"><span class="st">                            GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb154-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb154-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb154-9" data-line-number="9"><span class="kw">kable</span>(rs1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">1. ORDER BY table_catalog</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="co"># Add an order by clause to order the output by tbl_vws in descending order.</span></a>
<a class="sourceLine" id="cb155-2" data-line-number="2">rs2 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;2. ORDER BY tbl_vws desc&#39; showing</span></a>
<a class="sourceLine" id="cb155-3" data-line-number="3"><span class="st">                                  ,t.table_catalog DB,t.table_schema,COUNT(*) tbl_vws </span></a>
<a class="sourceLine" id="cb155-4" data-line-number="4"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb155-5" data-line-number="5"><span class="st">                            GROUP BY t.table_catalog,t.table_schema</span></a>
<a class="sourceLine" id="cb155-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb155-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb155-8" data-line-number="8"><span class="kw">kable</span>(rs2)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="right">tbl_vws</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="right">121</td>
</tr>
<tr class="even">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="right">22</td>
</tr>
<tr class="odd">
<td align="left">2. ORDER BY tbl_vws desc</td>
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="right">67</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="co"># Complete the SQL statement to show everything about all the tables.</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2"></a>
<a class="sourceLine" id="cb156-3" data-line-number="3">rs3 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;3. all information_schema tables&#39; showing</span></a>
<a class="sourceLine" id="cb156-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb156-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb156-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb156-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb156-8" data-line-number="8"><span class="kw">kable</span>(<span class="kw">head</span> (rs3,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">3. all information_schema tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="co"># Use the results from above to pull interesting columns from just the information_schema</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2">rs4 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;4. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb157-3" data-line-number="3"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb157-6" data-line-number="6"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb157-7" data-line-number="7">                      )</a>
<a class="sourceLine" id="cb157-8" data-line-number="8"><span class="kw">head</span>(rs4,display_rows)</a></code></pre></div>
<pre><code>##                        showing            ?column?
## 1 4. information_schema.tables your code goes here
## 2 4. information_schema.tables your code goes here
## 3 4. information_schema.tables your code goes here
## 4 4. information_schema.tables your code goes here
## 5 4. information_schema.tables your code goes here</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1"><span class="co"># Modify the SQL below with your interesting column names.</span></a>
<a class="sourceLine" id="cb159-2" data-line-number="2"><span class="co"># Update the where clause to return only rows from the information schema and begin with &#39;tab&#39;</span></a>
<a class="sourceLine" id="cb159-3" data-line-number="3">rs5 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;5. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb159-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb159-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb159-6" data-line-number="6"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb159-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb159-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb159-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs5,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">5. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="co"># Modify the SQL below with your interesting column names.</span></a>
<a class="sourceLine" id="cb160-2" data-line-number="2"><span class="co"># Update the where clause to return only rows from the information schema and begin with &#39;col&#39;</span></a>
<a class="sourceLine" id="cb160-3" data-line-number="3">rs6 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;6. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb160-4" data-line-number="4"><span class="st">                                  ,&#39;your code goes here&#39; </span></a>
<a class="sourceLine" id="cb160-5" data-line-number="5"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb160-6" data-line-number="6"><span class="st">                             where &#39;your code goes here&#39; = &#39;your code goes here&#39;</span></a>
<a class="sourceLine" id="cb160-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb160-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb160-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs6,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">?column?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="even">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
<tr class="odd">
<td align="left">6. information_schema.tables</td>
<td align="left">your code goes here</td>
</tr>
</tbody>
</table>
<p>In the next exercise we combine both the table and column output from the previous exercises. Review the following code block. The last two lines of the WHERE clause are swithced. Will the result set be the same or different? Execute the code block and review the two datasets.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1">rs7 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;7. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb161-2" data-line-number="2"><span class="st">                                  ,table_catalog||&#39;.&#39;||table_schema db_info, table_name, table_type</span></a>
<a class="sourceLine" id="cb161-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb161-4" data-line-number="4"><span class="st">                             where table_schema = &#39;information_schema&#39;</span></a>
<a class="sourceLine" id="cb161-5" data-line-number="5"><span class="st">                               and table_name like &#39;table%&#39; OR table_name like &#39;%col%&#39;</span></a>
<a class="sourceLine" id="cb161-6" data-line-number="6"><span class="st">                               and table_type = &#39;VIEW&#39;</span></a>
<a class="sourceLine" id="cb161-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb161-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb161-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs7,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db_info</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">collations</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">collation_character_set_applicability</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_domain_usage</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_privileges</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">7. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_udt_usage</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1">rs8 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT &#39;8. information_schema.tables&#39; showing</span></a>
<a class="sourceLine" id="cb162-2" data-line-number="2"><span class="st">                                  ,table_catalog||&#39;.&#39;||table_schema db_info, table_name, table_type</span></a>
<a class="sourceLine" id="cb162-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb162-4" data-line-number="4"><span class="st">                             where table_schema = &#39;information_schema&#39;</span></a>
<a class="sourceLine" id="cb162-5" data-line-number="5"><span class="st">                               and table_type = &#39;VIEW&#39;</span></a>
<a class="sourceLine" id="cb162-6" data-line-number="6"><span class="st">                               and table_name like &#39;table%&#39; OR table_name like &#39;%col%&#39;</span></a>
<a class="sourceLine" id="cb162-7" data-line-number="7"><span class="st">                            &quot;</span></a>
<a class="sourceLine" id="cb162-8" data-line-number="8">                      )</a>
<a class="sourceLine" id="cb162-9" data-line-number="9"><span class="kw">kable</span>(<span class="kw">head</span>(rs8,display_rows))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">showing</th>
<th align="left">db_info</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">column_options</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">_pg_foreign_table_columns</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">view_column_usage</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">triggered_update_columns</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">8. information_schema.tables</td>
<td align="left">dvdrental.information_schema</td>
<td align="left">tables</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>Operator/Element</th>
<th>Associativity</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>.</td>
<td>left</td>
<td>table/column name separator</td>
</tr>
<tr class="even">
<td>::</td>
<td>left</td>
<td>PostgreSQL-style typecast</td>
</tr>
<tr class="odd">
<td><a href="sql-quick-start-simple-retrieval.html#section"></a></td>
<td>left</td>
<td>array element selection</td>
</tr>
<tr class="even">
<td>-</td>
<td>right</td>
<td>unary minus</td>
</tr>
<tr class="odd">
<td>^</td>
<td>left</td>
<td>exponentiation</td>
</tr>
<tr class="even">
<td>* / %</td>
<td>left</td>
<td>multiplication, division, modulo</td>
</tr>
<tr class="odd">
<td>+ -</td>
<td>left</td>
<td>addition, subtraction</td>
</tr>
<tr class="even">
<td>IS</td>
<td></td>
<td>IS TRUE, IS FALSE, IS UNKNOWN, IS NULL</td>
</tr>
<tr class="odd">
<td>ISNULL</td>
<td></td>
<td>test for null</td>
</tr>
<tr class="even">
<td>NOTNULL</td>
<td></td>
<td>test for not null</td>
</tr>
<tr class="odd">
<td>(any other)</td>
<td>left</td>
<td>all other native and user-defined operators</td>
</tr>
<tr class="even">
<td>IN</td>
<td></td>
<td>set membership</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td></td>
<td>range containment</td>
</tr>
<tr class="even">
<td>OVERLAPS</td>
<td></td>
<td>time interval overlap</td>
</tr>
<tr class="odd">
<td>LIKE ILIKE SIMILAR</td>
<td></td>
<td>string pattern matching</td>
</tr>
<tr class="even">
<td>&lt; &gt;</td>
<td></td>
<td>less than, greater than</td>
</tr>
<tr class="odd">
<td>=</td>
<td>right</td>
<td>equality, assignment</td>
</tr>
<tr class="even">
<td>NOT</td>
<td>right</td>
<td>logical negation</td>
</tr>
<tr class="odd">
<td>AND</td>
<td>left</td>
<td>logical conjunction</td>
</tr>
<tr class="even">
<td>OR</td>
<td>left</td>
<td>logical disjunction</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1">rs1 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="st">                                  ,t.table_name,t.table_type</span></a>
<a class="sourceLine" id="cb163-3" data-line-number="3"><span class="st">                              FROM information_schema.tables t&quot;</span>)</a>
<a class="sourceLine" id="cb163-4" data-line-number="4"></a>
<a class="sourceLine" id="cb163-5" data-line-number="5">rs2 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb163-6" data-line-number="6"><span class="st">                                  ,t.table_type,COUNT(*) tbls</span></a>
<a class="sourceLine" id="cb163-7" data-line-number="7"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb163-8" data-line-number="8"><span class="st">                            group by t.table_catalog ,t.table_schema</span></a>
<a class="sourceLine" id="cb163-9" data-line-number="9"><span class="st">                                  ,t.table_type</span></a>
<a class="sourceLine" id="cb163-10" data-line-number="10"><span class="st">                            &quot;</span>)</a>
<a class="sourceLine" id="cb163-11" data-line-number="11"></a>
<a class="sourceLine" id="cb163-12" data-line-number="12">rs3 &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,<span class="st">&quot;SELECT distinct t.table_catalog DB ,t.table_schema</span></a>
<a class="sourceLine" id="cb163-13" data-line-number="13"><span class="st">                                  ,t.table_type tbls</span></a>
<a class="sourceLine" id="cb163-14" data-line-number="14"><span class="st">                              FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb163-15" data-line-number="15"><span class="st">                            &quot;</span>)</a>
<a class="sourceLine" id="cb163-16" data-line-number="16"></a>
<a class="sourceLine" id="cb163-17" data-line-number="17"></a>
<a class="sourceLine" id="cb163-18" data-line-number="18"></a>
<a class="sourceLine" id="cb163-19" data-line-number="19"><span class="co">#kable(head(rs1 %&gt;% arrange (table_name)))</span></a>
<a class="sourceLine" id="cb163-20" data-line-number="20"><span class="co"># View(rs1)</span></a>
<a class="sourceLine" id="cb163-21" data-line-number="21"><span class="co"># View(rs2)</span></a>
<a class="sourceLine" id="cb163-22" data-line-number="22"><span class="co"># View(rs3)</span></a>
<a class="sourceLine" id="cb163-23" data-line-number="23"><span class="kw">kable</span>(<span class="kw">head</span>(rs1))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">table_name</th>
<th align="left">table_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">actor_info</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">customer_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">film_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">nicer_but_slower_film_list</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">sales_by_film_category</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">staff</td>
<td align="left">BASE TABLE</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(rs2))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">table_type</th>
<th align="right">tbls</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">BASE TABLE</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">VIEW</td>
<td align="right">60</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">BASE TABLE</td>
<td align="right">62</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">BASE TABLE</td>
<td align="right">15</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">VIEW</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">VIEW</td>
<td align="right">59</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(rs3))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">db</th>
<th align="left">table_schema</th>
<th align="left">tbls</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">information_schema</td>
<td align="left">VIEW</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">BASE TABLE</td>
</tr>
<tr class="odd">
<td align="left">dvdrental</td>
<td align="left">public</td>
<td align="left">VIEW</td>
</tr>
<tr class="even">
<td align="left">dvdrental</td>
<td align="left">pg_catalog</td>
<td align="left">VIEW</td>
</tr>
</tbody>
</table>
<p>www.dataquest.io/blog/postgres-internals</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">## Explain a `dplyr::join</a>
<a class="sourceLine" id="cb166-2" data-line-number="2"></a>
<a class="sourceLine" id="cb166-3" data-line-number="3">tbl_pk_fk_df &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbGetQuery</span>(con,</a>
<a class="sourceLine" id="cb166-4" data-line-number="4"><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb166-5" data-line-number="5"><span class="st">SELECT --t.table_catalog,t.table_schema,</span></a>
<a class="sourceLine" id="cb166-6" data-line-number="6"><span class="st">   c.table_name</span></a>
<a class="sourceLine" id="cb166-7" data-line-number="7"><span class="st">    ,kcu.column_name</span></a>
<a class="sourceLine" id="cb166-8" data-line-number="8"><span class="st">    ,c.constraint_name</span></a>
<a class="sourceLine" id="cb166-9" data-line-number="9"><span class="st">    ,c.constraint_type</span></a>
<a class="sourceLine" id="cb166-10" data-line-number="10"><span class="st">    ,coalesce(c2.table_name, &#39;&#39;) ref_table</span></a>
<a class="sourceLine" id="cb166-11" data-line-number="11"><span class="st">    ,coalesce(kcu2.column_name, &#39;&#39;) ref_table_col</span></a>
<a class="sourceLine" id="cb166-12" data-line-number="12"><span class="st">FROM information_schema.tables t</span></a>
<a class="sourceLine" id="cb166-13" data-line-number="13"><span class="st">LEFT JOIN information_schema.table_constraints c</span></a>
<a class="sourceLine" id="cb166-14" data-line-number="14"><span class="st">  ON t.table_catalog = c.table_catalog</span></a>
<a class="sourceLine" id="cb166-15" data-line-number="15"><span class="st">    AND t.table_schema = c.table_schema</span></a>
<a class="sourceLine" id="cb166-16" data-line-number="16"><span class="st">    AND t.table_name = c.table_name</span></a>
<a class="sourceLine" id="cb166-17" data-line-number="17"><span class="st">LEFT JOIN information_schema.key_column_usage kcu</span></a>
<a class="sourceLine" id="cb166-18" data-line-number="18"><span class="st">    ON c.constraint_schema = kcu.constraint_schema</span></a>
<a class="sourceLine" id="cb166-19" data-line-number="19"><span class="st">        AND c.constraint_name = kcu.constraint_name</span></a>
<a class="sourceLine" id="cb166-20" data-line-number="20"><span class="st">LEFT JOIN information_schema.referential_constraints rc</span></a>
<a class="sourceLine" id="cb166-21" data-line-number="21"><span class="st">    ON c.constraint_schema = rc.constraint_schema</span></a>
<a class="sourceLine" id="cb166-22" data-line-number="22"><span class="st">        AND c.constraint_name = rc.constraint_name</span></a>
<a class="sourceLine" id="cb166-23" data-line-number="23"><span class="st">LEFT JOIN information_schema.table_constraints c2</span></a>
<a class="sourceLine" id="cb166-24" data-line-number="24"><span class="st">    ON rc.unique_constraint_schema = c2.constraint_schema</span></a>
<a class="sourceLine" id="cb166-25" data-line-number="25"><span class="st">        AND rc.unique_constraint_name = c2.constraint_name</span></a>
<a class="sourceLine" id="cb166-26" data-line-number="26"><span class="st">LEFT JOIN information_schema.key_column_usage kcu2</span></a>
<a class="sourceLine" id="cb166-27" data-line-number="27"><span class="st">    ON c2.constraint_schema = kcu2.constraint_schema</span></a>
<a class="sourceLine" id="cb166-28" data-line-number="28"><span class="st">        AND c2.constraint_name = kcu2.constraint_name</span></a>
<a class="sourceLine" id="cb166-29" data-line-number="29"><span class="st">        AND kcu.ordinal_position = kcu2.ordinal_position</span></a>
<a class="sourceLine" id="cb166-30" data-line-number="30"><span class="st">WHERE c.constraint_type IN (&#39;PRIMARY KEY&#39;, &#39;FOREIGN KEY&#39;)</span></a>
<a class="sourceLine" id="cb166-31" data-line-number="31"><span class="st">  AND c.table_catalog = &#39;dvdrental&#39;</span></a>
<a class="sourceLine" id="cb166-32" data-line-number="32"><span class="st">    AND c.table_schema = &#39;public&#39;</span></a>
<a class="sourceLine" id="cb166-33" data-line-number="33"><span class="st">ORDER BY c.table_name;</span></a>
<a class="sourceLine" id="cb166-34" data-line-number="34"><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb166-35" data-line-number="35"></a>
<a class="sourceLine" id="cb166-36" data-line-number="36"><span class="co"># View(tbl_pk_fk_df)</span></a>
<a class="sourceLine" id="cb166-37" data-line-number="37"></a>
<a class="sourceLine" id="cb166-38" data-line-number="38">tables_df &lt;-<span class="st"> </span>tbl_pk_fk_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(table_name)</a>
<a class="sourceLine" id="cb166-39" data-line-number="39"><span class="co"># View(tables_df)</span></a></code></pre></div>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1"><span class="kw">library</span>(DiagrammeR)</a>
<a class="sourceLine" id="cb167-2" data-line-number="2"></a>
<a class="sourceLine" id="cb167-3" data-line-number="3">table_nodes_ndf &lt;-<span class="st"> </span><span class="kw">create_node_df</span>(</a>
<a class="sourceLine" id="cb167-4" data-line-number="4">  n &lt;-<span class="st"> </span><span class="kw">nrow</span>(tables_df)</a>
<a class="sourceLine" id="cb167-5" data-line-number="5">  ,type  &lt;-<span class="st"> &#39;table&#39;</span></a>
<a class="sourceLine" id="cb167-6" data-line-number="6">  ,label &lt;-<span class="st"> </span>tables_df<span class="op">$</span>table_name</a>
<a class="sourceLine" id="cb167-7" data-line-number="7">  ,<span class="dt">shape =</span> <span class="st">&quot;rectangle&quot;</span></a>
<a class="sourceLine" id="cb167-8" data-line-number="8">  ,<span class="dt">width =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb167-9" data-line-number="9">  ,<span class="dt">height =</span> <span class="fl">.5</span></a>
<a class="sourceLine" id="cb167-10" data-line-number="10">  ,<span class="dt">fontsize =</span> <span class="dv">18</span></a>
<a class="sourceLine" id="cb167-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb167-12" data-line-number="12"></a>
<a class="sourceLine" id="cb167-13" data-line-number="13">tbl_pk_fk_ids_df &lt;-<span class="st"> </span><span class="kw">inner_join</span>(tbl_pk_fk_df,table_nodes_ndf</a>
<a class="sourceLine" id="cb167-14" data-line-number="14">                ,<span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;table_name&#39;</span>=<span class="st">&#39;label&#39;</span>)</a>
<a class="sourceLine" id="cb167-15" data-line-number="15">                ,<span class="kw">suffix</span>(<span class="kw">c</span>(<span class="st">&#39;st&#39;</span>,<span class="st">&#39;s&#39;</span>))</a>
<a class="sourceLine" id="cb167-16" data-line-number="16">                ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb167-17" data-line-number="17"><span class="st">     </span><span class="kw">rename</span>(<span class="st">&#39;src_tbl_id&#39;</span> =<span class="st"> </span>id) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb167-18" data-line-number="18"><span class="st">     </span><span class="kw">left_join</span>(table_nodes_ndf</a>
<a class="sourceLine" id="cb167-19" data-line-number="19">               ,<span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&#39;ref_table&#39;</span>=<span class="st">&#39;label&#39;</span>) </a>
<a class="sourceLine" id="cb167-20" data-line-number="20">               ,<span class="kw">suffix</span>(<span class="kw">c</span>(<span class="st">&#39;st&#39;</span>,<span class="st">&#39;t&#39;</span>))</a>
<a class="sourceLine" id="cb167-21" data-line-number="21">               ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb167-22" data-line-number="22"><span class="st">     </span><span class="kw">rename</span>(<span class="st">&#39;fk_tbl_id&#39;</span> =<span class="st"> </span>id) </a>
<a class="sourceLine" id="cb167-23" data-line-number="23"></a>
<a class="sourceLine" id="cb167-24" data-line-number="24">tbl_fk_df &lt;-<span class="st"> </span>tbl_pk_fk_ids_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(constraint_type <span class="op">==</span><span class="st"> &#39;FOREIGN KEY&#39;</span>)     </a>
<a class="sourceLine" id="cb167-25" data-line-number="25">tbl_pk_df &lt;-<span class="st"> </span>tbl_pk_fk_ids_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(constraint_type <span class="op">==</span><span class="st"> &#39;PRIMARY KEY&#39;</span>) </a>
<a class="sourceLine" id="cb167-26" data-line-number="26"><span class="co"># View(tbl_pk_fk_ids_df)</span></a>
<a class="sourceLine" id="cb167-27" data-line-number="27"><span class="co"># View(tbl_fk_df)</span></a>
<a class="sourceLine" id="cb167-28" data-line-number="28"><span class="co"># View(tbl_pk_df)</span></a>
<a class="sourceLine" id="cb167-29" data-line-number="29"><span class="kw">kable</span>(<span class="kw">head</span>(tbl_fk_df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">table_name</th>
<th align="left">column_name</th>
<th align="left">constraint_name</th>
<th align="left">constraint_type</th>
<th align="left">ref_table</th>
<th align="left">ref_table_col</th>
<th align="right">src_tbl_id</th>
<th align="left">type.x</th>
<th align="left">shape.x</th>
<th align="right">width.x</th>
<th align="right">height.x</th>
<th align="right">fontsize.x</th>
<th align="right">fk_tbl_id</th>
<th align="left">type.y</th>
<th align="left">shape.y</th>
<th align="right">width.y</th>
<th align="right">height.y</th>
<th align="right">fontsize.y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">address</td>
<td align="left">city_id</td>
<td align="left">fk_address_city</td>
<td align="left">FOREIGN KEY</td>
<td align="left">city</td>
<td align="left">city_id</td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="left">country_id</td>
<td align="left">fk_city</td>
<td align="left">FOREIGN KEY</td>
<td align="left">country</td>
<td align="left">country_id</td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">5</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">customer</td>
<td align="left">address_id</td>
<td align="left">customer_address_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">address</td>
<td align="left">address_id</td>
<td align="right">6</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">film</td>
<td align="left">language_id</td>
<td align="left">film_language_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">language</td>
<td align="left">language_id</td>
<td align="right">7</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">11</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">film_actor</td>
<td align="left">actor_id</td>
<td align="left">film_actor_actor_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">actor</td>
<td align="left">actor_id</td>
<td align="right">8</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">1</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">film_actor</td>
<td align="left">film_id</td>
<td align="left">film_actor_film_id_fkey</td>
<td align="left">FOREIGN KEY</td>
<td align="left">film</td>
<td align="left">film_id</td>
<td align="right">8</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">7</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(tbl_pk_df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">table_name</th>
<th align="left">column_name</th>
<th align="left">constraint_name</th>
<th align="left">constraint_type</th>
<th align="left">ref_table</th>
<th align="left">ref_table_col</th>
<th align="right">src_tbl_id</th>
<th align="left">type.x</th>
<th align="left">shape.x</th>
<th align="right">width.x</th>
<th align="right">height.x</th>
<th align="right">fontsize.x</th>
<th align="right">fk_tbl_id</th>
<th align="left">type.y</th>
<th align="left">shape.y</th>
<th align="right">width.y</th>
<th align="right">height.y</th>
<th align="right">fontsize.y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">actor</td>
<td align="left">actor_id</td>
<td align="left">actor_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">1</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">address</td>
<td align="left">address_id</td>
<td align="left">address_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">2</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">category</td>
<td align="left">category_id</td>
<td align="left">category_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">3</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="left">city_id</td>
<td align="left">city_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">4</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="left">country_id</td>
<td align="left">country_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">5</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">customer</td>
<td align="left">customer_id</td>
<td align="left">customer_pkey</td>
<td align="left">PRIMARY KEY</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">6</td>
<td align="left">table</td>
<td align="left">rectangle</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">18</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="co"># Create an edge data frame, edf</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"></a>
<a class="sourceLine" id="cb169-3" data-line-number="3">fk_edf &lt;-</a>
<a class="sourceLine" id="cb169-4" data-line-number="4"><span class="st">  </span><span class="kw">create_edge_df</span>(</a>
<a class="sourceLine" id="cb169-5" data-line-number="5">    <span class="dt">from =</span> tbl_fk_df<span class="op">$</span>src_tbl_id,</a>
<a class="sourceLine" id="cb169-6" data-line-number="6">    <span class="dt">to =</span> tbl_fk_df<span class="op">$</span>fk_tbl_id,</a>
<a class="sourceLine" id="cb169-7" data-line-number="7">    <span class="dt">rel =</span> <span class="st">&quot;fk&quot;</span>,</a>
<a class="sourceLine" id="cb169-8" data-line-number="8">    <span class="dt">label=</span>tbl_fk_df<span class="op">$</span>constraint_name,</a>
<a class="sourceLine" id="cb169-9" data-line-number="9">    <span class="dt">fontsize =</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb169-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb169-11" data-line-number="11"><span class="co"># View(fk_edf)</span></a></code></pre></div>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1">graph &lt;-</a>
<a class="sourceLine" id="cb170-2" data-line-number="2"><span class="st">  </span><span class="kw">create_graph</span>(</a>
<a class="sourceLine" id="cb170-3" data-line-number="3">    <span class="dt">nodes_df =</span> table_nodes_ndf,</a>
<a class="sourceLine" id="cb170-4" data-line-number="4">    <span class="dt">edges_df =</span> fk_edf,</a>
<a class="sourceLine" id="cb170-5" data-line-number="5">    <span class="dt">graph_name =</span> <span class="st">&#39;Simple FK Graph&#39;</span></a>
<a class="sourceLine" id="cb170-6" data-line-number="6">    )</a>
<a class="sourceLine" id="cb170-7" data-line-number="7"></a>
<a class="sourceLine" id="cb170-8" data-line-number="8"><span class="co"># View the graph</span></a>
<a class="sourceLine" id="cb170-9" data-line-number="9"><span class="kw">render_graph</span>(graph)</a></code></pre></div>
<div id="htmlwidget-aa83b18b48ec4ad64944" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa83b18b48ec4ad64944">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"actor\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"2\" [label = \"address\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"3\" [label = \"category\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"4\" [label = \"city\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"5\" [label = \"country\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"6\" [label = \"customer\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"7\" [label = \"film\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"8\" [label = \"film_actor\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"9\" [label = \"film_category\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"10\" [label = \"inventory\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"11\" [label = \"language\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"12\" [label = \"payment\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"13\" [label = \"rental\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"14\" [label = \"staff\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n  \"15\" [label = \"store\", shape = \"rectangle\", width = \"1\", height = \"0.5\", fontsize = \"18\", fillcolor = \"#F0F8FF\", fontcolor = \"#000000\"] \n\"2\"->\"4\" [label = \"fk_address_city\", fontsize = \"15\"] \n\"4\"->\"5\" [label = \"fk_city\", fontsize = \"15\"] \n\"6\"->\"2\" [label = \"customer_address_id_fkey\", fontsize = \"15\"] \n\"7\"->\"11\" [label = \"film_language_id_fkey\", fontsize = \"15\"] \n\"8\"->\"1\" [label = \"film_actor_actor_id_fkey\", fontsize = \"15\"] \n\"8\"->\"7\" [label = \"film_actor_film_id_fkey\", fontsize = \"15\"] \n\"9\"->\"3\" [label = \"film_category_category_id_fkey\", fontsize = \"15\"] \n\"9\"->\"7\" [label = \"film_category_film_id_fkey\", fontsize = \"15\"] \n\"10\"->\"7\" [label = \"inventory_film_id_fkey\", fontsize = \"15\"] \n\"12\"->\"6\" [label = \"payment_customer_id_fkey\", fontsize = \"15\"] \n\"12\"->\"14\" [label = \"payment_staff_id_fkey\", fontsize = \"15\"] \n\"12\"->\"13\" [label = \"payment_rental_id_fkey\", fontsize = \"15\"] \n\"13\"->\"14\" [label = \"rental_staff_id_key\", fontsize = \"15\"] \n\"13\"->\"6\" [label = \"rental_customer_id_fkey\", fontsize = \"15\"] \n\"13\"->\"10\" [label = \"rental_inventory_id_fkey\", fontsize = \"15\"] \n\"14\"->\"2\" [label = \"staff_address_id_fkey\", fontsize = \"15\"] \n\"15\"->\"2\" [label = \"store_address_id_fkey\", fontsize = \"15\"] \n\"15\"->\"14\" [label = \"store_manager_staff_id_fkey\", fontsize = \"15\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1"><span class="kw">dbDisconnect</span>(con)</a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="co"># system2(&#39;docker&#39;,&#39;stop sql-pet&#39;)</span></a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sql-quick-start-simple-retrieval.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="getting-metadata-about-and-from-the-database-21.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/smithjd/sql-pet/edit/master/21-29-drilling-into-db-environment.Rmd",
"text": "Edit"
},
"download": ["r-database-docker.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
