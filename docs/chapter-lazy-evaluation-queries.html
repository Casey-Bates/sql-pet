<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 10 Lazy Evaluation and Lazy Queries | R, Databases and Docker</title>
  <meta name="description" content="An introduction to Docker and PostgreSQL for R users to simulate use cases behind corporate walls.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 10 Lazy Evaluation and Lazy Queries | R, Databases and Docker" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to Docker and PostgreSQL for R users to simulate use cases behind corporate walls." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Lazy Evaluation and Lazy Queries | R, Databases and Docker" />
  
  <meta name="twitter:description" content="An introduction to Docker and PostgreSQL for R users to simulate use cases behind corporate walls." />
  

<meta name="author" content="John David Smith, Sophie Yang, M. Edward (Ed) Borasky, Scott Came, Mary Anne Thygesen, Ian Frantz, and Dipti Muni">


<meta name="date" content="2019-02-15">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="chapter-dbms-queries-intro.html">
<link rel="next" href="chapter-dbi-package-sql.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.5/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.0/grViz.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R, Databases and Docker</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#using-r-to-query-a-dbms-in-your-organization"><i class="fa fa-check"></i><b>1.1</b> Using R to query a DBMS in your organization</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#docker-as-a-tool-for-users"><i class="fa fa-check"></i><b>1.2</b> Docker as a tool for UseRs</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#who-are-we"><i class="fa fa-check"></i><b>1.3</b> Who are we?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-did-this-project-come-about"><i class="fa fa-check"></i><b>1.4</b> How did this project come about?</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#navigation"><i class="fa fa-check"></i><b>1.5</b> Navigation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html"><i class="fa fa-check"></i><b>2</b> Basic Concepts</a><ul>
<li class="chapter" data-level="2.1" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#the-big-picture-r-and-the-docker-postgresql-playground-on-your-machine"><i class="fa fa-check"></i><b>2.1</b> The big picture: R and the Docker / PostgreSQL playground on your machine</a></li>
<li class="chapter" data-level="2.2" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#your-computer-and-its-operating-system"><i class="fa fa-check"></i><b>2.2</b> Your computer and its operating system</a></li>
<li class="chapter" data-level="2.3" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#r"><i class="fa fa-check"></i><b>2.3</b> R</a></li>
<li class="chapter" data-level="2.4" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#docker"><i class="fa fa-check"></i><b>2.4</b> Docker</a><ul>
<li class="chapter" data-level="2.4.1" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#virtual-machines-and-hypervisors"><i class="fa fa-check"></i><b>2.4.1</b> Virtual machines and hypervisors</a></li>
<li class="chapter" data-level="2.4.2" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#containers"><i class="fa fa-check"></i><b>2.4.2</b> Containers</a></li>
<li class="chapter" data-level="2.4.3" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#docker-itself"><i class="fa fa-check"></i><b>2.4.3</b> Docker itself</a></li>
<li class="chapter" data-level="2.4.4" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#docker-objects"><i class="fa fa-check"></i><b>2.4.4</b> Docker objects</a></li>
<li class="chapter" data-level="2.4.5" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#hosting-docker-on-windows-machines"><i class="fa fa-check"></i><b>2.4.5</b> Hosting Docker on Windows machines</a></li>
<li class="chapter" data-level="2.4.6" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#hosting-docker-on-macos-machines"><i class="fa fa-check"></i><b>2.4.6</b> Hosting Docker on macOS machines</a></li>
<li class="chapter" data-level="2.4.7" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#hosting-docker-on-unix-machines"><i class="fa fa-check"></i><b>2.4.7</b> Hosting Docker on UNIX machines</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#normal-and-normalized-data"><i class="fa fa-check"></i><b>2.5</b> ‘Normal’ and ‘normalized’ data</a><ul>
<li class="chapter" data-level="2.5.1" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#tidy-data"><i class="fa fa-check"></i><b>2.5.1</b> Tidy data</a></li>
<li class="chapter" data-level="2.5.2" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#design-of-normal-data"><i class="fa fa-check"></i><b>2.5.2</b> Design of “normal data”</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#organizational-dbms"><i class="fa fa-check"></i><b>2.6</b> Organizational dbms</a></li>
<li class="chapter" data-level="2.7" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#sql"><i class="fa fa-check"></i><b>2.7</b> SQL</a><ul>
<li class="chapter" data-level="2.7.1" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#data-mapping-between-r-vs-sql-data-types"><i class="fa fa-check"></i><b>2.7.1</b> Data mapping between R vs SQL data types</a></li>
<li class="chapter" data-level="2.7.2" data-path="chapter-basic-concepts.html"><a href="chapter-basic-concepts.html#postgresql-and-connection-parameters"><i class="fa fa-check"></i><b>2.7.2</b> PostgreSQL and connection parameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html"><i class="fa fa-check"></i><b>3</b> How to use this book</a><ul>
<li class="chapter" data-level="3.1" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html#retrieve-the-code-from-github"><i class="fa fa-check"></i><b>3.1</b> Retrieve the code from GitHub</a></li>
<li class="chapter" data-level="3.2" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html#read-along-experiment-as-you-go"><i class="fa fa-check"></i><b>3.2</b> Read along, experiment as you go</a></li>
<li class="chapter" data-level="3.3" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html#participating"><i class="fa fa-check"></i><b>3.3</b> Participating</a><ul>
<li class="chapter" data-level="3.3.1" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html#browsing-the-book"><i class="fa fa-check"></i><b>3.3.1</b> Browsing the book</a></li>
<li class="chapter" data-level="3.3.2" data-path="chapter-how-to-use-this-book.html"><a href="chapter-how-to-use-this-book.html#diving-in"><i class="fa fa-check"></i><b>3.3.2</b> Diving in</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html"><i class="fa fa-check"></i><b>4</b> Learning Goals and Use Cases</a><ul>
<li class="chapter" data-level="4.1" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html#ask-yourself-what-are-you-aiming-for"><i class="fa fa-check"></i><b>4.1</b> Ask yourself, what are you aiming for?</a></li>
<li class="chapter" data-level="4.2" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html#learning-goals"><i class="fa fa-check"></i><b>4.2</b> Learning Goals</a></li>
<li class="chapter" data-level="4.3" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html#imagining-a-dvd-rental-business"><i class="fa fa-check"></i><b>4.3</b> Imagining a DVD rental business</a></li>
<li class="chapter" data-level="4.4" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html#use-cases"><i class="fa fa-check"></i><b>4.4</b> Use cases</a></li>
<li class="chapter" data-level="4.5" data-path="chapter-learning-goals.html"><a href="chapter-learning-goals.html#investigating-a-question-using-an-organizations-database"><i class="fa fa-check"></i><b>4.5</b> Investigating a question using an organization’s database</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html"><i class="fa fa-check"></i><b>5</b> Connecting Docker, PostgreSQL, and R</a><ul>
<li class="chapter" data-level="5.1" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#verify-that-docker-is-running"><i class="fa fa-check"></i><b>5.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="5.2" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#remove-previous-containers-if-they-exist"><i class="fa fa-check"></i><b>5.2</b> Remove previous containers if they exist</a></li>
<li class="chapter" data-level="5.3" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#connecting-reading-and-writing-to-postgresql-from-r"><i class="fa fa-check"></i><b>5.3</b> Connecting, reading and writing to PostgreSQL from R</a><ul>
<li class="chapter" data-level="5.3.1" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#connecting-to-postgresql"><i class="fa fa-check"></i><b>5.3.1</b> Connecting to PostgreSQL</a></li>
<li class="chapter" data-level="5.3.2" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#interact-with-postgresql"><i class="fa fa-check"></i><b>5.3.2</b> Interact with PostgreSQL</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="chapter-connect-docker-postgresql-r.html"><a href="chapter-connect-docker-postgresql-r.html#clean-up"><i class="fa fa-check"></i><b>5.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html"><i class="fa fa-check"></i><b>6</b> Create the dvdrental database in PostgreSQL in Docker</a><ul>
<li class="chapter" data-level="6.1" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#verify-that-docker-is-up-and-running"><i class="fa fa-check"></i><b>6.2</b> Verify that Docker is up and running</a></li>
<li class="chapter" data-level="6.3" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#clean-up-if-appropriate"><i class="fa fa-check"></i><b>6.3</b> Clean up if appropriate</a></li>
<li class="chapter" data-level="6.4" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#build-the-pet-sql-docker-image"><i class="fa fa-check"></i><b>6.4</b> Build the pet-sql Docker image</a></li>
<li class="chapter" data-level="6.5" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#run-the-pet-sql-docker-image"><i class="fa fa-check"></i><b>6.5</b> Run the pet-sql Docker Image</a></li>
<li class="chapter" data-level="6.6" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#connect-to-postgresql-with-r"><i class="fa fa-check"></i><b>6.6</b> Connect to PostgreSQL with R</a></li>
<li class="chapter" data-level="6.7" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#stop-and-start-to-demonstrate-persistence"><i class="fa fa-check"></i><b>6.7</b> Stop and start to demonstrate persistence</a></li>
<li class="chapter" data-level="6.8" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#cleaning-up"><i class="fa fa-check"></i><b>6.8</b> Cleaning up</a></li>
<li class="chapter" data-level="6.9" data-path="chapter-setup-dvdrental-db.html"><a href="chapter-setup-dvdrental-db.html#using-the-sql-pet-container-in-the-rest-of-the-book"><i class="fa fa-check"></i><b>6.9</b> Using the <code>sql-pet</code> container in the rest of the book</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html"><i class="fa fa-check"></i><b>7</b> Securing and using your dbms log-in credentials</a><ul>
<li class="chapter" data-level="7.1" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#set-up-the-sql-pet-docker-container"><i class="fa fa-check"></i><b>7.1</b> Set up the sql-pet Docker container</a><ul>
<li class="chapter" data-level="7.1.1" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#verify-that-docker-is-running-1"><i class="fa fa-check"></i><b>7.1.1</b> Verify that Docker is running</a></li>
<li class="chapter" data-level="7.1.2" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#start-the-docker-container"><i class="fa fa-check"></i><b>7.1.2</b> Start the Docker container:</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#storing-your-dbms-credentials"><i class="fa fa-check"></i><b>7.2</b> Storing your dbms credentials</a><ul>
<li class="chapter" data-level="7.2.1" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#connect-with-postgres-using-the-sys.getenv-function"><i class="fa fa-check"></i><b>7.2.1</b> Connect with Postgres using the Sys.getenv function</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chapter-dbms-login-credentials.html"><a href="chapter-dbms-login-credentials.html#clean-up-1"><i class="fa fa-check"></i><b>7.3</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html"><i class="fa fa-check"></i><b>8</b> Mapping your local environment</a><ul>
<li class="chapter" data-level="8.1" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#set-up-our-standard-pet-sql-environment"><i class="fa fa-check"></i><b>8.1</b> Set up our standard pet-sql environment</a></li>
<li class="chapter" data-level="8.2" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#sandbox-environment"><i class="fa fa-check"></i><b>8.2</b> Sandbox Environment</a><ul>
<li class="chapter" data-level="8.2.1" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#sandbox-entities-and-their-roles"><i class="fa fa-check"></i><b>8.2.1</b> Sandbox entities and their roles</a></li>
<li class="chapter" data-level="8.2.2" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#rstudio"><i class="fa fa-check"></i><b>8.2.2</b> RStudio</a></li>
<li class="chapter" data-level="8.2.3" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#os-local-command-line-interface"><i class="fa fa-check"></i><b>8.2.3</b> OS / local command line interface</a></li>
<li class="chapter" data-level="8.2.4" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#r-1"><i class="fa fa-check"></i><b>8.2.4</b> R</a></li>
<li class="chapter" data-level="8.2.5" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#docker-client"><i class="fa fa-check"></i><b>8.2.5</b> Docker client</a></li>
<li class="chapter" data-level="8.2.6" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#in-docker-linux"><i class="fa fa-check"></i><b>8.2.6</b> In Docker: Linux</a></li>
<li class="chapter" data-level="8.2.7" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#in-docker-psql"><i class="fa fa-check"></i><b>8.2.7</b> In Docker: <code>psql</code></a></li>
<li class="chapter" data-level="8.2.8" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#in-docker-postgresql"><i class="fa fa-check"></i><b>8.2.8</b> In Docker: <code>PostgreSQL</code></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#getting-there-from-here-entity-connections-equivalence-and-commands"><i class="fa fa-check"></i><b>8.3</b> Getting there from here: entity connections, equivalence, and commands</a><ul>
<li class="chapter" data-level="8.3.1" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#get-info-on-a-local-file-from-r-code"><i class="fa fa-check"></i><b>8.3.1</b> Get info on a local file from R code</a></li>
<li class="chapter" data-level="8.3.2" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#get-info-on-the-same-os-file-inside-docker-from-r-code"><i class="fa fa-check"></i><b>8.3.2</b> Get info on the same OS file inside Docker from R Code</a></li>
<li class="chapter" data-level="8.3.3" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#docker-and-psql-together-from-r-or-your-cli"><i class="fa fa-check"></i><b>8.3.3</b> Docker and psql together from R or your CLI</a></li>
<li class="chapter" data-level="8.3.4" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#nesting-commands-illustrates-how-entities-are-connected"><i class="fa fa-check"></i><b>8.3.4</b> Nesting commands illustrates how entities are connected</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="chapter-your-local-environment.html"><a href="chapter-your-local-environment.html#exercises"><i class="fa fa-check"></i><b>8.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html"><i class="fa fa-check"></i><b>9</b> Introduction to DBMS queries</a><ul>
<li class="chapter" data-level="9.1" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#setup"><i class="fa fa-check"></i><b>9.1</b> Setup</a></li>
<li class="chapter" data-level="9.2" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#getting-data-from-the-database"><i class="fa fa-check"></i><b>9.2</b> Getting data from the database</a><ul>
<li class="chapter" data-level="9.2.1" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#finding-out-whats-there"><i class="fa fa-check"></i><b>9.2.1</b> Finding out what’s there</a></li>
<li class="chapter" data-level="9.2.2" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#listing-all-the-fields-for-all-the-tables"><i class="fa fa-check"></i><b>9.2.2</b> Listing all the fields for all the tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#downloading-an-entire-table"><i class="fa fa-check"></i><b>9.2.3</b> Downloading an entire table</a></li>
<li class="chapter" data-level="9.2.4" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#a-table-object-that-can-be-reused"><i class="fa fa-check"></i><b>9.2.4</b> A table object that can be reused</a></li>
<li class="chapter" data-level="9.2.5" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#controlling-the-number-of-rows-returned"><i class="fa fa-check"></i><b>9.2.5</b> Controlling the number of rows returned</a></li>
<li class="chapter" data-level="9.2.6" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#random-rows-from-the-dbms"><i class="fa fa-check"></i><b>9.2.6</b> Random rows from the dbms</a></li>
<li class="chapter" data-level="9.2.7" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#sub-setting-variables"><i class="fa fa-check"></i><b>9.2.7</b> Sub-setting variables</a></li>
<li class="chapter" data-level="9.2.8" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#translating-dplyr-code-to-sql-queries"><i class="fa fa-check"></i><b>9.2.8</b> Translating <code>dplyr</code> code to <code>SQL</code> queries</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#mixing-dplyr-and-sql"><i class="fa fa-check"></i><b>9.3</b> Mixing dplyr and SQL</a></li>
<li class="chapter" data-level="9.4" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#examining-a-single-table-with-r"><i class="fa fa-check"></i><b>9.4</b> Examining a single table with R</a><ul>
<li class="chapter" data-level="9.4.1" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#str---a-base-package-workhorse"><i class="fa fa-check"></i><b>9.4.1</b> <code>str</code> - a base package workhorse</a></li>
<li class="chapter" data-level="9.4.2" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#always-look-at-your-data-with-head-view-or-kable"><i class="fa fa-check"></i><b>9.4.2</b> Always <strong>look</strong> at your data with <code>head</code>, <code>View</code>, or <code>kable</code></a></li>
<li class="chapter" data-level="9.4.3" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#the-summary-function-in-base"><i class="fa fa-check"></i><b>9.4.3</b> The <code>summary</code> function in <code>base</code></a></li>
<li class="chapter" data-level="9.4.4" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#the-glimpse-function-in-the-tibble-package"><i class="fa fa-check"></i><b>9.4.4</b> The <code>glimpse</code> function in the <code>tibble</code> package</a></li>
<li class="chapter" data-level="9.4.5" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#the-skim-function-in-the-skimr-package"><i class="fa fa-check"></i><b>9.4.5</b> The <code>skim</code> function in the <code>skimr</code> package</a></li>
<li class="chapter" data-level="9.4.6" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#close-the-connection-and-shut-down-sql-pet"><i class="fa fa-check"></i><b>9.4.6</b> Close the connection and shut down sql-pet</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="chapter-dbms-queries-intro.html"><a href="chapter-dbms-queries-intro.html#additional-reading"><i class="fa fa-check"></i><b>9.5</b> Additional reading</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html"><i class="fa fa-check"></i><b>10</b> Lazy Evaluation and Lazy Queries</a><ul>
<li class="chapter" data-level="10.1" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#setup-1"><i class="fa fa-check"></i><b>10.1</b> Setup</a></li>
<li class="chapter" data-level="10.2" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#r-is-lazy-and-comes-with-guardrails"><i class="fa fa-check"></i><b>10.2</b> R is lazy and comes with guardrails</a><ul>
<li class="chapter" data-level="10.2.1" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy-loading"><i class="fa fa-check"></i><b>10.2.1</b> Lazy loading</a></li>
<li class="chapter" data-level="10.2.2" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy-evaluation"><i class="fa fa-check"></i><b>10.2.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="10.2.3" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy-queries"><i class="fa fa-check"></i><b>10.2.3</b> Lazy Queries</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy-evaluation-and-lazy-queries"><i class="fa fa-check"></i><b>10.3</b> Lazy evaluation and lazy queries</a><ul>
<li class="chapter" data-level="10.3.1" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#dplyr-connection-objects"><i class="fa fa-check"></i><b>10.3.1</b> <code>dplyr</code> connection objects</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#when-does-a-lazy-query-trigger-data-retrieval"><i class="fa fa-check"></i><b>10.4</b> When does a lazy query trigger data retrieval?</a><ul>
<li class="chapter" data-level="10.4.1" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#create-a-black-box-query-for-experimentation"><i class="fa fa-check"></i><b>10.4.1</b> Create a black box query for experimentation</a></li>
<li class="chapter" data-level="10.4.2" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#experiment-overview"><i class="fa fa-check"></i><b>10.4.2</b> Experiment overview</a></li>
<li class="chapter" data-level="10.4.3" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_print"><i class="fa fa-check"></i><b>10.4.3</b> Q %&gt;% print()</a></li>
<li class="chapter" data-level="10.4.4" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_as-tibble"><i class="fa fa-check"></i><b>10.4.4</b> Q %&gt;% dplyr::as_tibble()</a></li>
<li class="chapter" data-level="10.4.5" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_head"><i class="fa fa-check"></i><b>10.4.5</b> Q %&gt;% head()</a></li>
<li class="chapter" data-level="10.4.6" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_tail"><i class="fa fa-check"></i><b>10.4.6</b> Q %&gt;% tail()</a></li>
<li class="chapter" data-level="10.4.7" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_length"><i class="fa fa-check"></i><b>10.4.7</b> Q %&gt;% length()</a></li>
<li class="chapter" data-level="10.4.8" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_str"><i class="fa fa-check"></i><b>10.4.8</b> Q %&gt;% str()</a></li>
<li class="chapter" data-level="10.4.9" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_nrow"><i class="fa fa-check"></i><b>10.4.9</b> Q %&gt;% nrow()</a></li>
<li class="chapter" data-level="10.4.10" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_tally"><i class="fa fa-check"></i><b>10.4.10</b> Q %&gt;% dplyr::tally()</a></li>
<li class="chapter" data-level="10.4.11" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_collect"><i class="fa fa-check"></i><b>10.4.11</b> Q %&gt;% dplyr::collect()</a></li>
<li class="chapter" data-level="10.4.12" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_show-query"><i class="fa fa-check"></i><b>10.4.12</b> Q %&gt;% dplyr::show_query()</a></li>
<li class="chapter" data-level="10.4.13" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#lazy_q_build"><i class="fa fa-check"></i><b>10.4.13</b> Qc &lt;- Q %&gt;% dplyr::count(customer_email)</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="chapter-lazy-evaluation-queries.html"><a href="chapter-lazy-evaluation-queries.html#other-resources"><i class="fa fa-check"></i><b>10.5</b> Other resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html"><i class="fa fa-check"></i><b>11</b> DBI package and SQL</a><ul>
<li class="chapter" data-level="11.1" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#setup-2"><i class="fa fa-check"></i><b>11.1</b> Setup</a></li>
<li class="chapter" data-level="11.2" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#sql-in-r-markdown"><i class="fa fa-check"></i><b>11.2</b> SQL in R Markdown</a></li>
<li class="chapter" data-level="11.3" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#dbi-package"><i class="fa fa-check"></i><b>11.3</b> DBI Package</a><ul>
<li class="chapter" data-level="11.3.1" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#retrieve-the-whole-table"><i class="fa fa-check"></i><b>11.3.1</b> Retrieve the whole table</a></li>
<li class="chapter" data-level="11.3.2" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#or-a-chunk-at-a-time"><i class="fa fa-check"></i><b>11.3.2</b> Or a chunk at a time</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#dividing-the-work-between-r-on-your-machine-and-the-dbms"><i class="fa fa-check"></i><b>11.4</b> Dividing the work between R on your machine and the DBMS</a><ul>
<li class="chapter" data-level="11.4.1" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#make-the-server-do-as-much-work-as-you-can"><i class="fa fa-check"></i><b>11.4.1</b> Make the server do as much work as you can</a></li>
<li class="chapter" data-level="11.4.2" data-path="chapter-dbi-package-sql.html"><a href="chapter-dbi-package-sql.html#criteria-for-choosing-between-dplyr-and-native-sql"><i class="fa fa-check"></i><b>11.4.2</b> Criteria for choosing between <code>dplyr</code> and native SQL</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html"><i class="fa fa-check"></i><b>12</b> Introduction to SQL Joins</a><ul>
<li class="chapter" data-level="12.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#setup-3"><i class="fa fa-check"></i><b>12.1</b> Setup</a></li>
<li class="chapter" data-level="12.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#making-up-data-for-join-examples"><i class="fa fa-check"></i><b>12.2</b> Making up data for Join Examples</a><ul>
<li class="chapter" data-level="12.2.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-delete-data-syntax"><i class="fa fa-check"></i><b>12.2.1</b> SQL Delete Data Syntax</a></li>
<li class="chapter" data-level="12.2.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#delete-new-practice-customers-from-the-customer-table."><i class="fa fa-check"></i><b>12.2.2</b> Delete New Practice Customers from the Customer table.</a></li>
<li class="chapter" data-level="12.2.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#delete-new-practice-store-from-the-store-table."><i class="fa fa-check"></i><b>12.2.3</b> Delete New Practice Store from the Store Table.</a></li>
<li class="chapter" data-level="12.2.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-single-row-insert-data-syntax"><i class="fa fa-check"></i><b>12.2.4</b> SQL Single Row Insert Data Syntax</a></li>
<li class="chapter" data-level="12.2.5" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#primary-key-constraint-error-message"><i class="fa fa-check"></i><b>12.2.5</b> Primary Key Constraint Error Message</a></li>
<li class="chapter" data-level="12.2.6" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#r-exercise-inserting-a-single-row-via-a-dataframe"><i class="fa fa-check"></i><b>12.2.6</b> R Exercise: Inserting a Single Row via a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-multi-row-insert-data-syntax"><i class="fa fa-check"></i><b>12.3</b> SQL Multi-Row Insert Data Syntax</a></li>
<li class="chapter" data-level="12.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-multi-row-insert-data-example"><i class="fa fa-check"></i><b>12.4</b> SQL Multi-Row Insert Data Example</a></li>
<li class="chapter" data-level="12.5" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-multi-row-insert-data-example"><i class="fa fa-check"></i><b>12.5</b> DPLYR Multi-Row Insert Data Example</a><ul>
<li class="chapter" data-level="12.5.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#r-exercise-inserting-multiple-rows-via-a-dataframe"><i class="fa fa-check"></i><b>12.5.1</b> R Exercise: Inserting Multiple Rows via a Dataframe</a></li>
<li class="chapter" data-level="12.5.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#creating-a-messy-store-row"><i class="fa fa-check"></i><b>12.5.2</b> Creating a Messy Store Row</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#joins"><i class="fa fa-check"></i><b>12.6</b> Joins</a><ul>
<li class="chapter" data-level="12.6.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#join-types"><i class="fa fa-check"></i><b>12.6.1</b> Join Types</a></li>
<li class="chapter" data-level="12.6.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#valentines-party"><i class="fa fa-check"></i><b>12.6.2</b> Valentines Party</a></li>
<li class="chapter" data-level="12.6.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#join-syntax"><i class="fa fa-check"></i><b>12.6.3</b> Join Syntax</a></li>
<li class="chapter" data-level="12.6.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#join-tables"><i class="fa fa-check"></i><b>12.6.4</b> Join Tables</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#natural-join-delayed-time-bomb"><i class="fa fa-check"></i><b>12.7</b> Natural Join Delayed Time Bomb</a><ul>
<li class="chapter" data-level="12.7.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-customer-store_id-distribution"><i class="fa fa-check"></i><b>12.7.1</b> SQL Customer store_id Distribution</a></li>
<li class="chapter" data-level="12.7.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sample-customer-and-store-join-data"><i class="fa fa-check"></i><b>12.7.2</b> Sample Customer and Store Join Data</a></li>
<li class="chapter" data-level="12.7.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-store_id-distribution-exercise"><i class="fa fa-check"></i><b>12.7.3</b> dplyr store_id distribution Exercise</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#join-templates"><i class="fa fa-check"></i><b>12.8</b> Join Templates</a></li>
<li class="chapter" data-level="12.9" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#inner-joins"><i class="fa fa-check"></i><b>12.9</b> Inner Joins</a><ul>
<li class="chapter" data-level="12.9.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-inner-join-details-example_inner-join-details-sql"><i class="fa fa-check"></i><b>12.9.1</b> SQL Inner Join Details {example_inner-join-details-sql}</a></li>
<li class="chapter" data-level="12.9.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-inner-join-details-example_inner-join-details-dplyr"><i class="fa fa-check"></i><b>12.9.2</b> Dplyr Inner Join Details {example_inner-join-details-dplyr}</a></li>
<li class="chapter" data-level="12.9.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-inner-join-summary-example_inner-join-summary-sql"><i class="fa fa-check"></i><b>12.9.3</b> SQL Inner Join Summary {example_inner-join-summary-sql}</a></li>
<li class="chapter" data-level="12.9.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-inner-join-summary-example_inner-join-summary_dplyr"><i class="fa fa-check"></i><b>12.9.4</b> Dplyr Inner Join Summary {example_inner-join-summary_dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#left-joins"><i class="fa fa-check"></i><b>12.10</b> Left Joins</a><ul>
<li class="chapter" data-level="12.10.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-left-join-details-example_left-join-details-sql"><i class="fa fa-check"></i><b>12.10.1</b> SQL Left Join Details {example_left-join-details-sql}</a></li>
<li class="chapter" data-level="12.10.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-left-join-details-example_left-join-details-dplyr"><i class="fa fa-check"></i><b>12.10.2</b> Dplyr Left Join Details {example_left-join-details-dplyr}</a></li>
<li class="chapter" data-level="12.10.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-left-join-summary-example_left-join-summary-sql"><i class="fa fa-check"></i><b>12.10.3</b> SQL Left Join Summary {example_left-join-summary-sql}</a></li>
<li class="chapter" data-level="12.10.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-left-join-summary-example_left-join-summary-dplyr"><i class="fa fa-check"></i><b>12.10.4</b> Dplyr Left Join Summary {example_left-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="12.11" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#why-include-one-of-the-inner-join-key-columns"><i class="fa fa-check"></i><b>12.11</b> Why Include one of the Inner Join Key columns?</a></li>
<li class="chapter" data-level="12.12" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#right-joins"><i class="fa fa-check"></i><b>12.12</b> Right Joins</a><ul>
<li class="chapter" data-level="12.12.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-right-join-details-example_right-join-details-sql"><i class="fa fa-check"></i><b>12.12.1</b> SQL Right Join Details {example_right-join-details-sql}</a></li>
<li class="chapter" data-level="12.12.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-right-join-details-example_right-join-details-dplyr"><i class="fa fa-check"></i><b>12.12.2</b> Dplyr Right Join Details {example_right-join-details-dplyr}</a></li>
<li class="chapter" data-level="12.12.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-right-outer-join-summary-example_right-join-summary-sql"><i class="fa fa-check"></i><b>12.12.3</b> SQL Right Outer Join Summary {example_right-join-summary-sql}</a></li>
<li class="chapter" data-level="12.12.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-right-join-summary-example_right-join-summary-dplyr"><i class="fa fa-check"></i><b>12.12.4</b> dplyr Right Join Summary {example_right-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="12.13" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#full-join"><i class="fa fa-check"></i><b>12.13</b> Full Join</a><ul>
<li class="chapter" data-level="12.13.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-full-join-details-example_full-join-details-sql"><i class="fa fa-check"></i><b>12.13.1</b> SQL Full Join Details {example_full-join-details-sql}</a></li>
<li class="chapter" data-level="12.13.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-full-join-details-example_full-join-details-sql"><i class="fa fa-check"></i><b>12.13.2</b> Dplyr Full Join Details {example_full-join-details-sql}</a></li>
<li class="chapter" data-level="12.13.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-full-join-summary-example_full-join-summary-sql"><i class="fa fa-check"></i><b>12.13.3</b> SQL Full Join Summary {example_full-join-summary-sql}</a></li>
<li class="chapter" data-level="12.13.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-full-join-summary-example_full-join-summary-dplyr"><i class="fa fa-check"></i><b>12.13.4</b> Dplyr Full Join Summary {example_full-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="12.14" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#semi-join"><i class="fa fa-check"></i><b>12.14</b> Semi Join</a><ul>
<li class="chapter" data-level="12.14.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-semi-join-customer-to-store-example_semi-join-sql-1"><i class="fa fa-check"></i><b>12.14.1</b> SQL Semi Join Customer to Store {example_semi-join-sql-1}</a></li>
<li class="chapter" data-level="12.14.2" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-semi-join-customer-to-store-example_semi-join-dplyr-1"><i class="fa fa-check"></i><b>12.14.2</b> Dplyr Semi Join Customer to Store {example_semi-join-dplyr-1}</a></li>
<li class="chapter" data-level="12.14.3" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-semi-join-store-to-customer-example_semi-join-sql-2"><i class="fa fa-check"></i><b>12.14.3</b> SQL Semi Join Store to Customer {example_semi-join-sql-2}</a></li>
<li class="chapter" data-level="12.14.4" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-semi-join-store-to-customer-example_semi-join-dplyr-2"><i class="fa fa-check"></i><b>12.14.4</b> Dplyr Semi Join Store to Customer {example_semi-join-dplyr-2}</a></li>
<li class="chapter" data-level="12.14.5" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#sql-semi-join-store-to-customer-take-2-example_semi-join-sql-3"><i class="fa fa-check"></i><b>12.14.5</b> SQL Semi Join Store to Customer Take 2 {example_semi-join-sql-3}</a></li>
</ul></li>
<li class="chapter" data-level="12.15" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#anti-joins"><i class="fa fa-check"></i><b>12.15</b> Anti Joins</a></li>
<li class="chapter" data-level="12.16" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#non-equa-join-example"><i class="fa fa-check"></i><b>12.16</b> Non-Equa-Join Example</a><ul>
<li class="chapter" data-level="12.16.1" data-path="chapter-sql-joins.html"><a href="chapter-sql-joins.html#dplyr-non-equa-join-example_inner-join-dplyr"><i class="fa fa-check"></i><b>12.16.1</b> Dplyr Non-equa Join {example_inner-join-dplyr}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html"><i class="fa fa-check"></i><b>13</b> SQL joins and complex queries</a><ul>
<li class="chapter" data-level="13.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#database-privileges"><i class="fa fa-check"></i><b>13.1</b> Database Privileges</a></li>
<li class="chapter" data-level="13.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#database-constraints"><i class="fa fa-check"></i><b>13.2</b> Database constraints</a><ul>
<li class="chapter" data-level="13.2.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dvd-rental-primary-foreign-key-constraints"><i class="fa fa-check"></i><b>13.2.1</b> DVD Rental Primary Foreign Key Constraints</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#making-up-data-for-join-examples-1"><i class="fa fa-check"></i><b>13.3</b> Making up data for Join Examples</a><ul>
<li class="chapter" data-level="13.3.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-delete-data-syntax-1"><i class="fa fa-check"></i><b>13.3.1</b> SQL Delete Data Syntax</a></li>
<li class="chapter" data-level="13.3.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#delete-new-practice-customers-from-the-customer-table.-1"><i class="fa fa-check"></i><b>13.3.2</b> Delete New Practice Customers from the Customer table.</a></li>
<li class="chapter" data-level="13.3.3" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#delete-new-practice-films-from-the-film-table."><i class="fa fa-check"></i><b>13.3.3</b> Delete New Practice Films from the Film table.</a></li>
<li class="chapter" data-level="13.3.4" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-single-row-insert-data-syntax-1"><i class="fa fa-check"></i><b>13.3.4</b> SQL Single Row Insert Data Syntax</a></li>
<li class="chapter" data-level="13.3.5" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#primary-and-foreign-key-constraint-error-messages"><i class="fa fa-check"></i><b>13.3.5</b> Primary and Foreign Key Constraint Error Messages</a></li>
<li class="chapter" data-level="13.3.6" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#r-exercise-inserting-a-single-row-via-a-dataframe-1"><i class="fa fa-check"></i><b>13.3.6</b> R Exercise: Inserting a Single Row via a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-multi-row-insert-data-syntax-1"><i class="fa fa-check"></i><b>13.4</b> SQL Multi-Row Insert Data Syntax</a></li>
<li class="chapter" data-level="13.5" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-multi-row-insert-data-example-1"><i class="fa fa-check"></i><b>13.5</b> SQL Multi-Row Insert Data Example</a><ul>
<li class="chapter" data-level="13.5.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#r-exercise-inserting-multiple-rows-via-a-dataframe-1"><i class="fa fa-check"></i><b>13.5.1</b> R Exercise: Inserting Multiple Rows via a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#messy-data"><i class="fa fa-check"></i><b>13.6</b> Messy Data</a><ul>
<li class="chapter" data-level="13.6.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#messing-up-the-row"><i class="fa fa-check"></i><b>13.6.1</b> Messing up the row</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#joins-1"><i class="fa fa-check"></i><b>13.7</b> Joins</a><ul>
<li class="chapter" data-level="13.7.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#join-types-1"><i class="fa fa-check"></i><b>13.7.1</b> Join Types</a></li>
<li class="chapter" data-level="13.7.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#valentines-party-1"><i class="fa fa-check"></i><b>13.7.2</b> Valentines Party</a></li>
<li class="chapter" data-level="13.7.3" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#join-syntax-1"><i class="fa fa-check"></i><b>13.7.3</b> Join Syntax</a></li>
<li class="chapter" data-level="13.7.4" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#join-tables-1"><i class="fa fa-check"></i><b>13.7.4</b> Join Tables</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#natural-join-delayed-time-bomb-1"><i class="fa fa-check"></i><b>13.8</b> Natural Join Delayed Time Bomb</a><ul>
<li class="chapter" data-level="13.8.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dplyr-language-distribution-exercise"><i class="fa fa-check"></i><b>13.8.1</b> dplyr language distribution Exercise</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#join-templates-1"><i class="fa fa-check"></i><b>13.9</b> Join Templates</a><ul>
<li class="chapter" data-level="13.9.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dplyr-inner-join-template"><i class="fa fa-check"></i><b>13.9.1</b> dplyr Inner Join Template</a></li>
<li class="chapter" data-level="13.9.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dplyr-left-outer-join-template"><i class="fa fa-check"></i><b>13.9.2</b> dplyr Left Outer Join Template</a></li>
</ul></li>
<li class="chapter" data-level="13.10" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-anti-join-costs"><i class="fa fa-check"></i><b>13.10</b> SQL anti join Costs</a></li>
<li class="chapter" data-level="13.11" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dplyr-anti-joins"><i class="fa fa-check"></i><b>13.11</b> dplyr Anti joins</a><ul>
<li class="chapter" data-level="13.11.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#dplyr-costs"><i class="fa fa-check"></i><b>13.11.1</b> dplyr Costs</a></li>
</ul></li>
<li class="chapter" data-level="13.12" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#exercises-1"><i class="fa fa-check"></i><b>13.12</b> Exercises</a><ul>
<li class="chapter" data-level="13.12.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#anti-joins-find-customers-who-have-never-rented-a-movie-take-2."><i class="fa fa-check"></i><b>13.12.1</b> Anti joins – Find customers who have never rented a movie, take 2.</a></li>
<li class="chapter" data-level="13.12.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-rows-per-table"><i class="fa fa-check"></i><b>13.12.2</b> SQL Rows Per Table</a></li>
</ul></li>
<li class="chapter" data-level="13.13" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#store-analysis"><i class="fa fa-check"></i><b>13.13</b> Store analysis</a><ul>
<li class="chapter" data-level="13.13.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-store-revenue-stream"><i class="fa fa-check"></i><b>13.13.1</b> SQL store revenue stream</a></li>
<li class="chapter" data-level="13.13.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sqlestimate-outstanding-balance"><i class="fa fa-check"></i><b>13.13.2</b> SQL:Estimate Outstanding Balance</a></li>
<li class="chapter" data-level="13.13.3" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#sql-actual-outstanding-balance"><i class="fa fa-check"></i><b>13.13.3</b> SQL actual outstanding balance</a></li>
<li class="chapter" data-level="13.13.4" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#rank-customers-with-highest-open-amounts"><i class="fa fa-check"></i><b>13.13.4</b> Rank customers with highest open amounts</a></li>
<li class="chapter" data-level="13.13.5" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#what-film-has-been-rented-the-most"><i class="fa fa-check"></i><b>13.13.5</b> what film has been rented the most</a></li>
<li class="chapter" data-level="13.13.6" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#what-film-has-been-generated-the-most-revenue-assuming-all-amounts-are-collected"><i class="fa fa-check"></i><b>13.13.6</b> what film has been generated the most revenue assuming all amounts are collected</a></li>
<li class="chapter" data-level="13.13.7" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#which-films-are-in-one-store-but-not-the-other."><i class="fa fa-check"></i><b>13.13.7</b> which films are in one store but not the other.</a></li>
<li class="chapter" data-level="13.13.8" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#compute-the-outstanding-balance."><i class="fa fa-check"></i><b>13.13.8</b> Compute the outstanding balance.</a></li>
</ul></li>
<li class="chapter" data-level="13.14" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#different-strategies-for-interacting-with-the-database"><i class="fa fa-check"></i><b>13.14</b> Different strategies for interacting with the database</a><ul>
<li class="chapter" data-level="13.14.1" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#use-dbgetquery"><i class="fa fa-check"></i><b>13.14.1</b> Use dbGetQuery</a></li>
<li class="chapter" data-level="13.14.2" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#use-dbexecute"><i class="fa fa-check"></i><b>13.14.2</b> Use dbExecute</a></li>
<li class="chapter" data-level="13.14.3" data-path="chapter-sql-joins-complex.html"><a href="chapter-sql-joins-complex.html#anti-join-find-sophie-who-has-never-rented-a-movie."><i class="fa fa-check"></i><b>13.14.3</b> Anti join – Find Sophie who has never rented a movie.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html"><i class="fa fa-check"></i><b>14</b> SQL &amp; dplyr joins additional data</a><ul>
<li class="chapter" data-level="14.1" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#making-up-data-for-join-examples-2"><i class="fa fa-check"></i><b>14.1</b> Making up data for Join Examples</a><ul>
<li class="chapter" data-level="14.1.1" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#sql-delete-data-syntax-2"><i class="fa fa-check"></i><b>14.1.1</b> SQL Delete Data Syntax</a></li>
<li class="chapter" data-level="14.1.2" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#delete-new-practice-store-from-the-store-table.-1"><i class="fa fa-check"></i><b>14.1.2</b> Delete New Practice Store from the Store Table.</a></li>
<li class="chapter" data-level="14.1.3" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#delete-film-1001-sophies-choice-records-in-film_category-rental-inventory-and-film"><i class="fa fa-check"></i><b>14.1.3</b> Delete film 1001, Sophie’s Choice, records in film_category, rental, inventory, and film</a></li>
<li class="chapter" data-level="14.1.4" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#delete-new-practice-customers-from-the-customer-table.-2"><i class="fa fa-check"></i><b>14.1.4</b> Delete New Practice Customers from the Customer table.</a></li>
<li class="chapter" data-level="14.1.5" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#delete-new-practice-customers-from-the-customer-table.-3"><i class="fa fa-check"></i><b>14.1.5</b> Delete New Practice Customers from the Customer table.</a></li>
<li class="chapter" data-level="14.1.6" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#sql-single-row-insert-data-syntax-2"><i class="fa fa-check"></i><b>14.1.6</b> SQL Single Row Insert Data Syntax</a></li>
<li class="chapter" data-level="14.1.7" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#primary-key-constraint-error-message-1"><i class="fa fa-check"></i><b>14.1.7</b> Primary Key Constraint Error Message</a></li>
<li class="chapter" data-level="14.1.8" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#r-exercise-inserting-a-single-row-via-a-dataframe-2"><i class="fa fa-check"></i><b>14.1.8</b> R Exercise: Inserting a Single Row via a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#sql-multi-row-insert-data-syntax-2"><i class="fa fa-check"></i><b>14.2</b> SQL Multi-Row Insert Data Syntax</a></li>
<li class="chapter" data-level="14.3" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#sql-multi-row-insert-data-example-2"><i class="fa fa-check"></i><b>14.3</b> SQL Multi-Row Insert Data Example</a></li>
<li class="chapter" data-level="14.4" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#dplyr-multi-row-insert-data-example-1"><i class="fa fa-check"></i><b>14.4</b> DPLYR Multi-Row Insert Data Example</a><ul>
<li class="chapter" data-level="14.4.1" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#r-exercise-inserting-multiple-rows-via-a-dataframe-2"><i class="fa fa-check"></i><b>14.4.1</b> R Exercise: Inserting Multiple Rows via a Dataframe</a></li>
<li class="chapter" data-level="14.4.2" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#creating-a-messy-store-row-1"><i class="fa fa-check"></i><b>14.4.2</b> Creating a Messy Store Row</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="chapter-sql-dplyr-data.html"><a href="chapter-sql-dplyr-data.html#create-a-film-record"><i class="fa fa-check"></i><b>14.5</b> Create a film record</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html"><i class="fa fa-check"></i><b>15</b> SQL &amp; dplyr joins</a><ul>
<li class="chapter" data-level="15.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#joins-2"><i class="fa fa-check"></i><b>15.1</b> Joins</a><ul>
<li class="chapter" data-level="15.1.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#join-types-2"><i class="fa fa-check"></i><b>15.1.1</b> Join Types</a></li>
<li class="chapter" data-level="15.1.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#valentines-party-2"><i class="fa fa-check"></i><b>15.1.2</b> Valentines Party</a></li>
<li class="chapter" data-level="15.1.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#join-syntax-2"><i class="fa fa-check"></i><b>15.1.3</b> Join Syntax</a></li>
<li class="chapter" data-level="15.1.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#join-tables-2"><i class="fa fa-check"></i><b>15.1.4</b> Join Tables</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#natural-join-delayed-time-bomb-2"><i class="fa fa-check"></i><b>15.2</b> Natural Join Delayed Time Bomb</a><ul>
<li class="chapter" data-level="15.2.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-customer-store_id-distribution-1"><i class="fa fa-check"></i><b>15.2.1</b> SQL Customer store_id Distribution</a></li>
<li class="chapter" data-level="15.2.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sample-customer-and-store-join-data-1"><i class="fa fa-check"></i><b>15.2.2</b> Sample Customer and Store Join Data</a></li>
<li class="chapter" data-level="15.2.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-store_id-distribution-exercise-1"><i class="fa fa-check"></i><b>15.2.3</b> dplyr store_id distribution Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#join-templates-2"><i class="fa fa-check"></i><b>15.3</b> Join Templates</a></li>
<li class="chapter" data-level="15.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#inner-joins-1"><i class="fa fa-check"></i><b>15.4</b> Inner Joins</a><ul>
<li class="chapter" data-level="15.4.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-inner-join-details-example_inner-join-details-sql-1"><i class="fa fa-check"></i><b>15.4.1</b> SQL Inner Join Details {example_inner-join-details-sql}</a></li>
<li class="chapter" data-level="15.4.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-inner-join-details-example_inner-join-details-dplyr-1"><i class="fa fa-check"></i><b>15.4.2</b> Dplyr Inner Join Details {example_inner-join-details-dplyr}</a></li>
<li class="chapter" data-level="15.4.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-inner-join-summary-example_inner-join-summary-sql-1"><i class="fa fa-check"></i><b>15.4.3</b> SQL Inner Join Summary {example_inner-join-summary-sql}</a></li>
<li class="chapter" data-level="15.4.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-inner-join-summary-example_inner-join-summary_dplyr-1"><i class="fa fa-check"></i><b>15.4.4</b> Dplyr Inner Join Summary {example_inner-join-summary_dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#left-joins-1"><i class="fa fa-check"></i><b>15.5</b> Left Joins</a><ul>
<li class="chapter" data-level="15.5.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-left-join-details-example_left-join-details-sql-1"><i class="fa fa-check"></i><b>15.5.1</b> SQL Left Join Details {example_left-join-details-sql}</a></li>
<li class="chapter" data-level="15.5.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-left-join-details-example_left-join-details-dplyr-1"><i class="fa fa-check"></i><b>15.5.2</b> Dplyr Left Join Details {example_left-join-details-dplyr}</a></li>
<li class="chapter" data-level="15.5.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-left-join-summary-example_left-join-summary-sql-1"><i class="fa fa-check"></i><b>15.5.3</b> SQL Left Join Summary {example_left-join-summary-sql}</a></li>
<li class="chapter" data-level="15.5.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-left-join-summary-example_left-join-summary-dplyr-1"><i class="fa fa-check"></i><b>15.5.4</b> Dplyr Left Join Summary {example_left-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#why-include-one-of-the-inner-join-key-columns-1"><i class="fa fa-check"></i><b>15.6</b> Why Include one of the Inner Join Key columns?</a></li>
<li class="chapter" data-level="15.7" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#right-joins-1"><i class="fa fa-check"></i><b>15.7</b> Right Joins</a><ul>
<li class="chapter" data-level="15.7.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-right-join-details-example_right-join-details-sql-1"><i class="fa fa-check"></i><b>15.7.1</b> SQL Right Join Details {example_right-join-details-sql}</a></li>
<li class="chapter" data-level="15.7.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-right-join-details-example_right-join-details-dplyr-1"><i class="fa fa-check"></i><b>15.7.2</b> Dplyr Right Join Details {example_right-join-details-dplyr}</a></li>
<li class="chapter" data-level="15.7.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-right-outer-join-summary-example_right-join-summary-sql-1"><i class="fa fa-check"></i><b>15.7.3</b> SQL Right Outer Join Summary {example_right-join-summary-sql}</a></li>
<li class="chapter" data-level="15.7.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-right-join-summary-example_right-join-summary-dplyr-1"><i class="fa fa-check"></i><b>15.7.4</b> dplyr Right Join Summary {example_right-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#full-join-1"><i class="fa fa-check"></i><b>15.8</b> Full Join</a><ul>
<li class="chapter" data-level="15.8.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-full-join-details-example_full-join-details-sql-1"><i class="fa fa-check"></i><b>15.8.1</b> SQL Full Join Details {example_full-join-details-sql}</a></li>
<li class="chapter" data-level="15.8.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-full-join-details-example_full-join-details-sql-1"><i class="fa fa-check"></i><b>15.8.2</b> Dplyr Full Join Details {example_full-join-details-sql}</a></li>
<li class="chapter" data-level="15.8.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-full-join-summary-example_full-join-summary-sql-1"><i class="fa fa-check"></i><b>15.8.3</b> SQL Full Join Summary {example_full-join-summary-sql}</a></li>
<li class="chapter" data-level="15.8.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-full-join-summary-example_full-join-summary-dplyr-1"><i class="fa fa-check"></i><b>15.8.4</b> Dplyr Full Join Summary {example_full-join-summary-dplyr}</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#semi-join-1"><i class="fa fa-check"></i><b>15.9</b> Semi Join</a><ul>
<li class="chapter" data-level="15.9.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-semi-join-customer-to-store-example_semi-join-sql-1-1"><i class="fa fa-check"></i><b>15.9.1</b> SQL Semi Join Customer to Store {example_semi-join-sql-1}</a></li>
<li class="chapter" data-level="15.9.2" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-semi-join-customer-to-store-example_semi-join-dplyr-1-1"><i class="fa fa-check"></i><b>15.9.2</b> Dplyr Semi Join Customer to Store {example_semi-join-dplyr-1}</a></li>
<li class="chapter" data-level="15.9.3" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-semi-join-store-to-customer-example_semi-join-sql-2-1"><i class="fa fa-check"></i><b>15.9.3</b> SQL Semi Join Store to Customer {example_semi-join-sql-2}</a></li>
<li class="chapter" data-level="15.9.4" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-semi-join-store-to-customer-example_semi-join-dplyr-2-1"><i class="fa fa-check"></i><b>15.9.4</b> Dplyr Semi Join Store to Customer {example_semi-join-dplyr-2}</a></li>
<li class="chapter" data-level="15.9.5" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#sql-semi-join-store-to-customer-take-2-example_semi-join-sql-3-1"><i class="fa fa-check"></i><b>15.9.5</b> SQL Semi Join Store to Customer Take 2 {example_semi-join-sql-3}</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#anti-joins-1"><i class="fa fa-check"></i><b>15.10</b> Anti Joins</a></li>
<li class="chapter" data-level="15.11" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#non-equa-join-example-1"><i class="fa fa-check"></i><b>15.11</b> Non-Equa-Join Example</a><ul>
<li class="chapter" data-level="15.11.1" data-path="chapter-sql-dplyr-joins.html"><a href="chapter-sql-dplyr-joins.html#dplyr-non-equa-join-example_inner-join-dplyr-1"><i class="fa fa-check"></i><b>15.11.1</b> Dplyr Non-equa Join {example_inner-join-dplyr}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html"><i class="fa fa-check"></i><b>16</b> SQL Metadata exercises</a><ul>
<li class="chapter" data-level="16.1" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#table-structures"><i class="fa fa-check"></i><b>16.1</b> Table Structures</a><ul>
<li class="chapter" data-level="16.1.1" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#customer-columns"><i class="fa fa-check"></i><b>16.1.1</b> Customer Columns</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#table-column-metadata"><i class="fa fa-check"></i><b>16.2</b> Table Column Metadata</a><ul>
<li class="chapter" data-level="16.2.1" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#sp_tbl_descr-parameterized-table-description-function"><i class="fa fa-check"></i><b>16.2.1</b> sp_tbl_descr – Parameterized Table Description Function</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#primary-and-foreign-key-constraints"><i class="fa fa-check"></i><b>16.3</b> Primary and Foreign Key Constraints</a><ul>
<li class="chapter" data-level="16.3.1" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#sp_tbl_pk_fk-parameterized-table-primary-foreign-keys-function"><i class="fa fa-check"></i><b>16.3.1</b> sp_tbl_pk_fk – Parameterized Table Primary Foreign Key(s) Function</a></li>
<li class="chapter" data-level="16.3.2" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#customer-primary-and-foreign-key-constraints"><i class="fa fa-check"></i><b>16.3.2</b> Customer primary and foreign key constraints</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#we-need-documentation-andor-a-dba."><i class="fa fa-check"></i><b>16.4</b> We need documentation and/or a DBA.</a><ul>
<li class="chapter" data-level="16.4.1" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#other-table-column-metadata"><i class="fa fa-check"></i><b>16.4.1</b> Other Table Column Metadata</a></li>
<li class="chapter" data-level="16.4.2" data-path="sql-metadata-exercises.html"><a href="sql-metadata-exercises.html#other-table-pk-fk"><i class="fa fa-check"></i><b>16.4.2</b> Other Table PK FK</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="chapter-sql-joins-exercises.html"><a href="chapter-sql-joins-exercises.html"><i class="fa fa-check"></i><b>17</b> SQL Joins exercises</a></li>
<li class="chapter" data-level="18" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html"><i class="fa fa-check"></i><b>18</b> SQL Union Exercise</a><ul>
<li class="chapter" data-level="18.1" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-rows-are-in-each-table"><i class="fa fa-check"></i><b>18.1</b> 1. How many rows are in each table?</a></li>
<li class="chapter" data-level="18.2" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#exercises-2"><i class="fa fa-check"></i><b>18.2</b> Exercises</a><ul>
<li class="chapter" data-level="18.2.1" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#where-is-the-dvd-rental-business-located"><i class="fa fa-check"></i><b>18.2.1</b> 1. Where is the DVD Rental Business located?</a></li>
<li class="chapter" data-level="18.2.2" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#list-each-store-and-the-staff-contact-information"><i class="fa fa-check"></i><b>18.2.2</b> 2. List Each Store and the Staff Contact Information?</a></li>
<li class="chapter" data-level="18.2.3" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-active-inactive-and-total-customers-does-the-dvd-rental-business-have"><i class="fa fa-check"></i><b>18.2.3</b> 3. How Many Active, Inactive, and Total Customers Does the DVD Rental Business Have?</a></li>
<li class="chapter" data-level="18.2.4" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-and-what-percent-of-customers-are-from-each-country"><i class="fa fa-check"></i><b>18.2.4</b> 4. How Many and What Percent of Customers Are From Each Country?</a></li>
<li class="chapter" data-level="18.2.5" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-countries-constitute-the-top-25-of-the-customer-base"><i class="fa fa-check"></i><b>18.2.5</b> 5 What Countries Constitute the Top 25% of the Customer Base?</a></li>
<li class="chapter" data-level="18.2.6" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-customers-are-in-australia-and-canada"><i class="fa fa-check"></i><b>18.2.6</b> 6. How many customers are in Australia and Canada?</a></li>
<li class="chapter" data-level="18.2.7" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-languages"><i class="fa fa-check"></i><b>18.2.7</b> 7. How Many Languages?</a></li>
<li class="chapter" data-level="18.2.8" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-is-the-distribution-of-dvds-by-language"><i class="fa fa-check"></i><b>18.2.8</b> 8. What is the distribution of DVD’s by Language</a></li>
<li class="chapter" data-level="18.2.9" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-are-the-number-of-rentals-and-rented-amount-by-store-by-month"><i class="fa fa-check"></i><b>18.2.9</b> 9. What are the number of rentals and rented amount by store, by month?</a></li>
<li class="chapter" data-level="18.2.10" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#rank-films-based-on-the-number-of-times-rented-and-associated-revenue"><i class="fa fa-check"></i><b>18.2.10</b> 10. Rank Films Based on the Number of Times Rented and Associated Revenue</a></li>
<li class="chapter" data-level="18.2.11" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-is-the-rental-distributiondvd-for-the-top-two-rented-films"><i class="fa fa-check"></i><b>18.2.11</b> 11 What is the rental distribution/DVD for the top two rented films?</a></li>
<li class="chapter" data-level="18.2.12" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#which-films-have-never-been-rented"><i class="fa fa-check"></i><b>18.2.12</b> 12. Which film(s) have never been rented</a></li>
<li class="chapter" data-level="18.2.13" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-are-the-different-film-categories"><i class="fa fa-check"></i><b>18.2.13</b> 13. What are the different film categories?</a></li>
<li class="chapter" data-level="18.2.14" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#rank-the-film-categeories-in-descending-order"><i class="fa fa-check"></i><b>18.2.14</b> 14. Rank the film categeories in descending order</a></li>
<li class="chapter" data-level="18.2.15" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#which-films-are-listed-in-multiple-categories"><i class="fa fa-check"></i><b>18.2.15</b> 15. Which films are listed in multiple categories?</a></li>
<li class="chapter" data-level="18.2.16" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#which-films-are-in-one-stores-inventory-but-not-the-other"><i class="fa fa-check"></i><b>18.2.16</b> 16. Which films are in one store’s inventory but not the other?</a></li>
<li class="chapter" data-level="18.2.17" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#which-films-are-not-tracked-in-inventory"><i class="fa fa-check"></i><b>18.2.17</b> 17 Which films are not tracked in inventory?</a></li>
<li class="chapter" data-level="18.2.18" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#rank-film-categories-based-on-descending-revenue"><i class="fa fa-check"></i><b>18.2.18</b> 18 Rank film categories based on descending Revenue</a></li>
<li class="chapter" data-level="18.2.19" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#how-many-rentals-were-returned-on-time-returned-late-never-returned"><i class="fa fa-check"></i><b>18.2.19</b> 19. How many rentals were returned on time, returned late, never returned?</a></li>
<li class="chapter" data-level="18.2.20" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#which-customers-have-never-rented-a-movie"><i class="fa fa-check"></i><b>18.2.20</b> 20. Which customers have never rented a movie?</a></li>
<li class="chapter" data-level="18.2.21" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#who-are-the-top-5-customers-with-the-most-rentals-and-associated-payments"><i class="fa fa-check"></i><b>18.2.21</b> 21 Who are the top 5 customers with the most rentals and associated payments?</a></li>
<li class="chapter" data-level="18.2.22" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#combine-the-top-5-rental-customers-40-or-more-rentals-and-zero-rental-customers"><i class="fa fa-check"></i><b>18.2.22</b> 23 Combine the top 5 rental customers, (40 or more rentals), and zero rental customers</a></li>
<li class="chapter" data-level="18.2.23" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#top-n1-and-bottom-n2-customers"><i class="fa fa-check"></i><b>18.2.23</b> 24. Top-n1 and bottom-n2 customers?</a></li>
<li class="chapter" data-level="18.2.24" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#sql-rows-per-table-1"><i class="fa fa-check"></i><b>18.2.24</b> SQL Rows Per Table</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#store-analysis-1"><i class="fa fa-check"></i><b>18.3</b> Store analysis</a><ul>
<li class="chapter" data-level="18.3.1" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#sql-store-revenue-stream-1"><i class="fa fa-check"></i><b>18.3.1</b> SQL store revenue stream</a></li>
<li class="chapter" data-level="18.3.2" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#sqlestimate-outstanding-balance-1"><i class="fa fa-check"></i><b>18.3.2</b> SQL:Estimate Outstanding Balance</a></li>
<li class="chapter" data-level="18.3.3" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#sql-actual-outstanding-balance-1"><i class="fa fa-check"></i><b>18.3.3</b> SQL actual outstanding balance</a></li>
<li class="chapter" data-level="18.3.4" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#rank-customers-with-highest-open-amounts-1"><i class="fa fa-check"></i><b>18.3.4</b> Rank customers with highest open amounts</a></li>
<li class="chapter" data-level="18.3.5" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#what-film-has-been-generated-the-most-revenue-assuming-all-amounts-are-collected-1"><i class="fa fa-check"></i><b>18.3.5</b> what film has been generated the most revenue assuming all amounts are collected</a></li>
<li class="chapter" data-level="18.3.6" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#compute-the-outstanding-balance.-1"><i class="fa fa-check"></i><b>18.3.6</b> Compute the outstanding balance.</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#different-strategies-for-interacting-with-the-database-1"><i class="fa fa-check"></i><b>18.4</b> Different strategies for interacting with the database</a><ul>
<li class="chapter" data-level="18.4.1" data-path="sql-union-exercise.html"><a href="sql-union-exercise.html#use-dbgetquery-1"><i class="fa fa-check"></i><b>18.4.1</b> Use dbGetQuery</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="chapter-anti-join-cost-comparisons.html"><a href="chapter-anti-join-cost-comparisons.html"><i class="fa fa-check"></i><b>19</b> Anti-join cost comparisons</a><ul>
<li class="chapter" data-level="19.1" data-path="chapter-anti-join-cost-comparisons.html"><a href="chapter-anti-join-cost-comparisons.html#sql-anti-join-costs-1"><i class="fa fa-check"></i><b>19.1</b> SQL anti join Costs</a></li>
<li class="chapter" data-level="19.2" data-path="chapter-anti-join-cost-comparisons.html"><a href="chapter-anti-join-cost-comparisons.html#dplyr-anti-joins-1"><i class="fa fa-check"></i><b>19.2</b> dplyr Anti joins</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html"><i class="fa fa-check"></i><b>20</b> SQL Quick start - simple retrieval</a><ul>
<li class="chapter" data-level="20.1" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#intro"><i class="fa fa-check"></i><b>20.1</b> Intro</a></li>
<li class="chapter" data-level="20.2" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#databases-and-third-normal-form---3nf"><i class="fa fa-check"></i><b>20.2</b> Databases and Third Normal Form - 3NF</a></li>
<li class="chapter" data-level="20.3" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#sql-commands"><i class="fa fa-check"></i><b>20.3</b> SQL Commands</a></li>
<li class="chapter" data-level="20.4" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#sql-select-quick-start"><i class="fa fa-check"></i><b>20.4</b> SQL SELECT Quick Start</a><ul>
<li class="chapter" data-level="20.4.1" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#select-clause-column-selection-vertical-partioning-of-data"><i class="fa fa-check"></i><b>20.4.1</b> SELECT Clause: Column Selection – Vertical Partioning of Data</a></li>
<li class="chapter" data-level="20.4.2" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#sql-comments"><i class="fa fa-check"></i><b>20.4.2</b> SQL Comments</a></li>
<li class="chapter" data-level="20.4.3" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#from-clause"><i class="fa fa-check"></i><b>20.4.3</b> FROM Clause</a></li>
<li class="chapter" data-level="20.4.4" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#where-clause-row-selection-horizontal-partitioning-of-data"><i class="fa fa-check"></i><b>20.4.4</b> WHERE Clause: Row Selection – Horizontal Partitioning of Data</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#paradigm-shift-from-r-dplyr-to-sql"><i class="fa fa-check"></i><b>20.5</b> Paradigm Shift from R-Dplyr to SQL</a><ul>
<li class="chapter" data-level="20.5.1" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#big-bang-versus-piped-incremental-steps."><i class="fa fa-check"></i><b>20.5.1</b> Big bang versus piped incremental steps.</a></li>
<li class="chapter" data-level="20.5.2" data-path="chapter-sql-quick-start.html"><a href="chapter-sql-quick-start.html#sql-execution-order"><i class="fa fa-check"></i><b>20.5.2</b> SQL Execution Order</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html"><i class="fa fa-check"></i><b>21</b> Getting metadata about and from PostgreSQL</a><ul>
<li class="chapter" data-level="21.1" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#database-contents-and-structure"><i class="fa fa-check"></i><b>21.1</b> Database contents and structure</a><ul>
<li class="chapter" data-level="21.1.1" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#database-structure"><i class="fa fa-check"></i><b>21.1.1</b> Database structure</a></li>
<li class="chapter" data-level="21.1.2" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#contents-of-the-information_schema"><i class="fa fa-check"></i><b>21.1.2</b> Contents of the <code>information_schema</code></a></li>
<li class="chapter" data-level="21.1.3" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#what-tables-are-in-the-database"><i class="fa fa-check"></i><b>21.1.3</b> What tables are in the database?</a></li>
<li class="chapter" data-level="21.1.4" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#digging-into-the-information_schema"><i class="fa fa-check"></i><b>21.1.4</b> Digging into the <code>information_schema</code></a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#what-columns-do-those-tables-contain"><i class="fa fa-check"></i><b>21.2</b> What columns do those tables contain?</a><ul>
<li class="chapter" data-level="21.2.1" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#what-is-the-difference-between-a-view-and-a-base-table"><i class="fa fa-check"></i><b>21.2.1</b> What is the difference between a <code>VIEW</code> and a <code>BASE TABLE</code>?</a></li>
<li class="chapter" data-level="21.2.2" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#what-data-types-are-found-in-the-database"><i class="fa fa-check"></i><b>21.2.2</b> What data types are found in the database?</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#characterizing-how-things-are-named"><i class="fa fa-check"></i><b>21.3</b> Characterizing how things are named</a><ul>
<li class="chapter" data-level="21.3.1" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#counting-columns-and-name-reuse"><i class="fa fa-check"></i><b>21.3.1</b> Counting columns and name reuse</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#database-keys"><i class="fa fa-check"></i><b>21.4</b> Database keys</a><ul>
<li class="chapter" data-level="21.4.1" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#direct-sql"><i class="fa fa-check"></i><b>21.4.1</b> Direct SQL</a></li>
<li class="chapter" data-level="21.4.2" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#database-keys-with-dplyr"><i class="fa fa-check"></i><b>21.4.2</b> Database keys with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="chapter-postgresql-metadata.html"><a href="chapter-postgresql-metadata.html#creating-your-own-data-dictionary"><i class="fa fa-check"></i><b>21.5</b> Creating your own data dictionary</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="chapter-dbms-environment.html"><a href="chapter-dbms-environment.html"><i class="fa fa-check"></i><b>22</b> Drilling into your DBMS environment</a><ul>
<li class="chapter" data-level="22.1" data-path="chapter-dbms-environment.html"><a href="chapter-dbms-environment.html#which-database"><i class="fa fa-check"></i><b>22.1</b> Which database?</a></li>
<li class="chapter" data-level="22.2" data-path="chapter-dbms-environment.html"><a href="chapter-dbms-environment.html#how-many-databases-reside-in-the-docker-container"><i class="fa fa-check"></i><b>22.2</b> How many databases reside in the Docker Container?</a></li>
<li class="chapter" data-level="22.3" data-path="chapter-dbms-environment.html"><a href="chapter-dbms-environment.html#which-schema"><i class="fa fa-check"></i><b>22.3</b> Which Schema?</a></li>
<li class="chapter" data-level="22.4" data-path="chapter-dbms-environment.html"><a href="chapter-dbms-environment.html#exercises-3"><i class="fa fa-check"></i><b>22.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="chapter-explain-queries.html"><a href="chapter-explain-queries.html"><i class="fa fa-check"></i><b>23</b> Explain queries</a><ul>
<li class="chapter" data-level="23.1" data-path="chapter-explain-queries.html"><a href="chapter-explain-queries.html#performance-considerations"><i class="fa fa-check"></i><b>23.1</b> Performance considerations</a></li>
<li class="chapter" data-level="23.2" data-path="chapter-explain-queries.html"><a href="chapter-explain-queries.html#clean-up-2"><i class="fa fa-check"></i><b>23.2</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="chapter-sql-queries-breakdown.html"><a href="chapter-sql-queries-breakdown.html"><i class="fa fa-check"></i><b>24</b> SQL queries broken down</a><ul>
<li class="chapter" data-level="24.1" data-path="chapter-sql-queries-breakdown.html"><a href="chapter-sql-queries-breakdown.html#sql-execution-steps"><i class="fa fa-check"></i><b>24.1</b> SQL Execution Steps</a></li>
<li class="chapter" data-level="24.2" data-path="chapter-sql-queries-breakdown.html"><a href="chapter-sql-queries-breakdown.html#passing-values-to-sql-statements"><i class="fa fa-check"></i><b>24.2</b> Passing values to SQL statements</a></li>
<li class="chapter" data-level="24.3" data-path="chapter-sql-queries-breakdown.html"><a href="chapter-sql-queries-breakdown.html#pass-multiple-sets-of-values-with-dbbind"><i class="fa fa-check"></i><b>24.3</b> Pass multiple sets of values with dbBind():</a></li>
<li class="chapter" data-level="24.4" data-path="chapter-sql-queries-breakdown.html"><a href="chapter-sql-queries-breakdown.html#clean-up-3"><i class="fa fa-check"></i><b>24.4</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html"><i class="fa fa-check"></i><b>25</b> Writing to the DBMS</a><ul>
<li class="chapter" data-level="25.1" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#set-up-a-cattle-container"><i class="fa fa-check"></i><b>25.1</b> Set up a <code>cattle</code> container</a><ul>
<li class="chapter" data-level="25.1.1" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#remove-previous-containers-if-they-exist-1"><i class="fa fa-check"></i><b>25.1.1</b> Remove previous containers if they exist</a></li>
<li class="chapter" data-level="25.1.2" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#connect-to-postgresql"><i class="fa fa-check"></i><b>25.1.2</b> Connect to PostgreSQL</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#interact-with-postgresql-1"><i class="fa fa-check"></i><b>25.2</b> Interact with PostgreSQL</a><ul>
<li class="chapter" data-level="25.2.1" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#create-a-new-table-in-the-database"><i class="fa fa-check"></i><b>25.2.1</b> Create a new table in the database</a></li>
<li class="chapter" data-level="25.2.2" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#modify-an-existing-table"><i class="fa fa-check"></i><b>25.2.2</b> Modify an existing table</a></li>
<li class="chapter" data-level="25.2.3" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#remove-the-table"><i class="fa fa-check"></i><b>25.2.3</b> Remove the table</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="chapter-writing-to-the-dbms.html"><a href="chapter-writing-to-the-dbms.html#clean-up-4"><i class="fa fa-check"></i><b>25.3</b> Clean up</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="chapter-appendix-setup-instructions.html"><a href="chapter-appendix-setup-instructions.html"><i class="fa fa-check"></i><b>A</b> Appendix A - Setup instructions</a><ul>
<li class="chapter" data-level="A.1" data-path="chapter-appendix-setup-instructions.html"><a href="chapter-appendix-setup-instructions.html#sandbox-prerequisites"><i class="fa fa-check"></i><b>A.1</b> Sandbox prerequisites</a></li>
<li class="chapter" data-level="A.2" data-path="chapter-appendix-setup-instructions.html"><a href="chapter-appendix-setup-instructions.html#r-rstudio-and-git"><i class="fa fa-check"></i><b>A.2</b> R, RStudio and Git</a></li>
<li class="chapter" data-level="A.3" data-path="chapter-appendix-setup-instructions.html"><a href="chapter-appendix-setup-instructions.html#install-docker"><i class="fa fa-check"></i><b>A.3</b> Install Docker</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html"><i class="fa fa-check"></i><b>B</b> Appendix B - Additional technical details for Windows users</a><ul>
<li class="chapter" data-level="B.1" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#hardware-requirements"><i class="fa fa-check"></i><b>B.1</b> Hardware requirements</a></li>
<li class="chapter" data-level="B.2" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#software-requirements"><i class="fa fa-check"></i><b>B.2</b> Software requirements</a><ul>
<li class="chapter" data-level="B.2.1" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#windows-7-8-8.1-and-windows-10-home-64-bit"><i class="fa fa-check"></i><b>B.2.1</b> Windows 7, 8, 8.1 and Windows 10 Home (64 bit)</a></li>
<li class="chapter" data-level="B.2.2" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#windows-10-pro"><i class="fa fa-check"></i><b>B.2.2</b> Windows 10 Pro</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#docker-for-windows-settings"><i class="fa fa-check"></i><b>B.3</b> Docker for Windows settings</a><ul>
<li class="chapter" data-level="B.3.1" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#shared-drives"><i class="fa fa-check"></i><b>B.3.1</b> Shared drives</a></li>
<li class="chapter" data-level="B.3.2" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#kubernetes"><i class="fa fa-check"></i><b>B.3.2</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="chapter-windows-tech-details.html"><a href="chapter-windows-tech-details.html#git-github-and-line-endings"><i class="fa fa-check"></i><b>B.4</b> Git, GitHub and line endings</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html"><i class="fa fa-check"></i><b>C</b> Appendix C - PostgreSQL Authentication</a><ul>
<li class="chapter" data-level="C.1" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#introduction"><i class="fa fa-check"></i><b>C.1</b> Introduction</a></li>
<li class="chapter" data-level="C.2" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#password-authentication-on-the-postgresql-docker-image"><i class="fa fa-check"></i><b>C.2</b> Password authentication on the PostgreSQL Docker image</a></li>
<li class="chapter" data-level="C.3" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#adding-roles"><i class="fa fa-check"></i><b>C.3</b> Adding roles</a><ul>
<li class="chapter" data-level="C.3.1" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#setting-up-docker"><i class="fa fa-check"></i><b>C.3.1</b> Setting up Docker</a></li>
<li class="chapter" data-level="C.3.2" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#creating-a-new-container"><i class="fa fa-check"></i><b>C.3.2</b> Creating a new container</a></li>
<li class="chapter" data-level="C.3.3" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#adding-a-role"><i class="fa fa-check"></i><b>C.3.3</b> Adding a role</a></li>
<li class="chapter" data-level="C.3.4" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#did-it-work"><i class="fa fa-check"></i><b>C.3.4</b> Did it work?</a></li>
<li class="chapter" data-level="C.3.5" data-path="chapter-appendix-postresql-authentication.html"><a href="chapter-appendix-postresql-authentication.html#remove-the-container"><i class="fa fa-check"></i><b>C.3.5</b> Remove the container</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="chapter-appendix-sql-quick-guide.html"><a href="chapter-appendix-sql-quick-guide.html"><i class="fa fa-check"></i><b>D</b> APPENDIX D - Quick Guide to SQL</a><ul>
<li class="chapter" data-level="D.1" data-path="chapter-appendix-sql-quick-guide.html"><a href="chapter-appendix-sql-quick-guide.html#data-manipulation-langauge-dml"><i class="fa fa-check"></i><b>D.1</b> Data Manipulation Langauge (DML)</a></li>
<li class="chapter" data-level="D.2" data-path="chapter-appendix-sql-quick-guide.html"><a href="chapter-appendix-sql-quick-guide.html#data-definition-langauge-ddl"><i class="fa fa-check"></i><b>D.2</b> Data Definition Langauge (DDL)</a></li>
<li class="chapter" data-level="D.3" data-path="chapter-appendix-sql-quick-guide.html"><a href="chapter-appendix-sql-quick-guide.html#data-control-language-dcl"><i class="fa fa-check"></i><b>D.3</b> Data Control Language (DCL)</a></li>
<li class="chapter" data-level="D.4" data-path="chapter-appendix-sql-quick-guide.html"><a href="chapter-appendix-sql-quick-guide.html#transaction-control-language-tcl"><i class="fa fa-check"></i><b>D.4</b> Transaction Control Language (TCL)</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="chapter-appendix-dplyr-functions.html"><a href="chapter-appendix-dplyr-functions.html"><i class="fa fa-check"></i><b>E</b> Dplyr functions and SQL cross-walk</a></li>
<li class="chapter" data-level="F" data-path="chapter-appendix-dbi-functions.html"><a href="chapter-appendix-dbi-functions.html"><i class="fa fa-check"></i><b>F</b> DBI package functions - coverage</a></li>
<li class="chapter" data-level="G" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html"><i class="fa fa-check"></i><b>G</b> Appendix Additional resources</a><ul>
<li class="chapter" data-level="G.1" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#editing-this-book"><i class="fa fa-check"></i><b>G.1</b> Editing this book</a></li>
<li class="chapter" data-level="G.2" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#docker-alternatives"><i class="fa fa-check"></i><b>G.2</b> Docker alternatives</a></li>
<li class="chapter" data-level="G.3" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#docker-and-r"><i class="fa fa-check"></i><b>G.3</b> Docker and R</a></li>
<li class="chapter" data-level="G.4" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#documentation-for-docker-and-postgresql"><i class="fa fa-check"></i><b>G.4</b> Documentation for Docker and PostgreSQL</a></li>
<li class="chapter" data-level="G.5" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#sql-and-dplyr"><i class="fa fa-check"></i><b>G.5</b> SQL and dplyr</a></li>
<li class="chapter" data-level="G.6" data-path="chapter-appendix-additional-resources.html"><a href="chapter-appendix-additional-resources.html#more-resources"><i class="fa fa-check"></i><b>G.6</b> More Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R, Databases and Docker</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter_lazy-evaluation-queries" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Lazy Evaluation and Lazy Queries</h1>
<blockquote>
<p>This chapter:</p>
<ul>
<li>Reviews lazy evaluation and discusses its interaction with remote query execution on a dbms</li>
<li>Demonstrates how <code>dplyr</code> queries behave in connection with several different functions</li>
<li>Offers some further resources on lazy loading, evaluation, execution, etc.</li>
</ul>
</blockquote>
<div id="setup-1" class="section level2">
<h2><span class="header-section-number">10.1</span> Setup</h2>
<p>The following packages are used in this chapter:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(DBI)
<span class="kw">library</span>(RPostgres)
<span class="kw">library</span>(dbplyr)
<span class="kw">require</span>(knitr)
<span class="kw">library</span>(bookdown)
<span class="kw">library</span>(sqlpetr)</code></pre>
<p>If you have not yet set up the Docker container with PostgreSQL and the dvdrental database, go back to <a href="chapter-setup-dvdrental-db.html#build-the-pet-sql-docker-image">those instructions</a> to configure your environment. Otherwise, start your <code>sql-pet</code> container:</p>
<pre class="sourceCode r"><code class="sourceCode r">sqlpetr<span class="op">::</span><span class="kw">sp_docker_start</span>(<span class="st">&quot;sql-pet&quot;</span>)</code></pre>
<p>Connect to the database:</p>
<pre class="sourceCode r"><code class="sourceCode r">con &lt;-<span class="st"> </span>sqlpetr<span class="op">::</span><span class="kw">sp_get_postgres_connection</span>(
  <span class="dt">user =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_USER_NAME&quot;</span>),
  <span class="dt">password =</span> <span class="kw">Sys.getenv</span>(<span class="st">&quot;DEFAULT_POSTGRES_PASSWORD&quot;</span>),
  <span class="dt">dbname =</span> <span class="st">&quot;dvdrental&quot;</span>,
  <span class="dt">seconds_to_test =</span> <span class="dv">30</span>
)</code></pre>
</div>
<div id="r-is-lazy-and-comes-with-guardrails" class="section level2">
<h2><span class="header-section-number">10.2</span> R is lazy and comes with guardrails</h2>
<p>By design, R is both a language and an interactive development environment (IDE). As a language, R tries to be as efficient as possible. As an IDE, R creates some guardrails to make it easy and safe to work with your data. For example <code>getOption(&quot;max.print&quot;)</code> prevents R from printing more rows of data than you want to handle in an interactive session, with a default of 99999 lines, which may or may not suit you.</p>
<p>On the other hand SQL is a <em>“Structured Query Language (SQL): a standard computer language for relational database management and data manipulation.”</em>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> SQL has various database-specific Interactive Development Environments (IDEs), such as <a href="https://www.pgadmin.org/">pgAdmin</a> for PostgreSQL. Roger Peng explains in <a href="https://bookdown.org/rdpeng/rprogdatascience/history-and-overview-of-r.html#basic-features-of-r">R Programming for Data Science</a> that:</p>
<blockquote>
<p>R has maintained the original S philosophy, which is that it provides a language that is both useful for interactive work, but contains a powerful programming language for developing new tools.</p>
</blockquote>
<p>This is complicated when R interacts with SQL. In a <a href="https://cran.r-project.org/web/packages/dbplyr/vignettes/dbplyr.html">vignette for dbplyr</a> Hadley Wickham explains:</p>
<blockquote>
<p>The most important difference between ordinary data frames and remote database queries is that your R code is translated into SQL and executed in the database on the remote server, not in R on your local machine. When working with databases, dplyr tries to be as lazy as possible:</p>
<ul>
<li><p>It never pulls data into R unless you explicitly ask for it.</p></li>
<li><p>It delays doing any work until the last possible moment: it collects together everything you want to do and then sends it to the database in one step.</p></li>
</ul>
</blockquote>
<p>Exactly when, which, and how much data is returned from the dbms is the topic of this chapter. Exactly how the data is represented in the dbms and then translated to a data frame is discussed in the <a href="https://cran.r-project.org/web/packages/DBI/vignettes/spec.html#_fetch_records_from_a_previously_executed_query_">DBI specification</a>.</p>
<p>Eventually, if you are interacting with a dbms from R you will need to understand the differences between lazy loading, lazy evaluation, and lazy queries.</p>
<div id="lazy-loading" class="section level3">
<h3><span class="header-section-number">10.2.1</span> Lazy loading</h3>
<p>“<em>Lazy loading is always used for code in packages but is optional (selected by the package maintainer) for datasets in packages.</em>”<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Lazy loading means that the code for a particular function doesn’t actually get loaded into memory until the last minute – when it’s actually being used.</p>
</div>
<div id="lazy-evaluation" class="section level3">
<h3><span class="header-section-number">10.2.2</span> Lazy evaluation</h3>
<p>Essentially “Lazy evaluation is a programming strategy that allows a symbol to be evaluated only when needed.”<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> That means that lazy evaluation is about <strong>symbols</strong> such as function arguments<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> when they are evaluated. Tidy evaluation complicates lazy evaluation.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
</div>
<div id="lazy-queries" class="section level3">
<h3><span class="header-section-number">10.2.3</span> Lazy Queries</h3>
<p>“<em>When you create a &quot;lazy&quot; query, you’re creating a pointer to a set of conditions on the database, but the query isn’t actually run and the data isn’t actually loaded until you call &quot;next&quot; or some similar method to actually fetch the data and load it into an object.</em>”<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
</div>
</div>
<div id="lazy-evaluation-and-lazy-queries" class="section level2">
<h2><span class="header-section-number">10.3</span> Lazy evaluation and lazy queries</h2>
<div id="dplyr-connection-objects" class="section level3">
<h3><span class="header-section-number">10.3.1</span> <code>dplyr</code> connection objects</h3>
<p>As introduced in the previous chapter, the <code>dplyr::tbl</code> function creates an object that might <strong>look</strong> like a data frame in that when you enter it on the command line, it prints a bunch of rows from the dbms table. But it is actually a <strong>list</strong> object that <code>dplyr</code> uses for constructing queries and retrieving data from the DBMS.</p>
<p>The following code illustrates these issues. The <code>dplyr::tbl</code> function creates the connection object that we store in an object named <code>rental_table</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">rental_table &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tbl</span>(con, <span class="st">&quot;rental&quot;</span>)</code></pre>
<p>At first glance, it <em>acts</em> like a data frame when you print it, although it only prints 10 of the table’s 16,044 rows:</p>
<pre class="sourceCode r"><code class="sourceCode r">rental_table</code></pre>
<pre><code>## # Source:   table&lt;rental&gt; [?? x 7]
## # Database: postgres [postgres@localhost:5432/dvdrental]
##    rental_id rental_date         inventory_id customer_id
##        &lt;int&gt; &lt;dttm&gt;                     &lt;int&gt;       &lt;int&gt;
##  1         2 2005-05-24 22:54:33         1525         459
##  2         3 2005-05-24 23:03:39         1711         408
##  3         4 2005-05-24 23:04:41         2452         333
##  4         5 2005-05-24 23:05:21         2079         222
##  5         6 2005-05-24 23:08:07         2792         549
##  6         7 2005-05-24 23:11:53         3995         269
##  7         8 2005-05-24 23:31:46         2346         239
##  8         9 2005-05-25 00:00:40         2580         126
##  9        10 2005-05-25 00:02:21         1824         399
## 10        11 2005-05-25 00:09:02         4443         142
## # … with more rows, and 3 more variables: return_date &lt;dttm&gt;,
## #   staff_id &lt;int&gt;, last_update &lt;dttm&gt;</code></pre>
<p>However, notice that the first output line shows <code>??</code>, rather than providing the number of rows in the table. Similarly, the next to last line shows:</p>
<pre><code>    ... with more rows, and 3 more variables</code></pre>
<p>whereas the output for a normal <code>tbl</code> of this rental data would say:</p>
<pre><code>    ... with 16,034 more rows, and 3 more variables</code></pre>
<p>So even though <code>rental_table</code> is a <code>tbl</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(rental_table)</code></pre>
<pre><code>## [1] &quot;tbl_PqConnection&quot; &quot;tbl_dbi&quot;          &quot;tbl_sql&quot;         
## [4] &quot;tbl_lazy&quot;         &quot;tbl&quot;</code></pre>
<p>It is not just a normal <code>tbl</code> of data. We can see that from the structure of <code>rental_table</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(rental_table)</code></pre>
<pre><code>## List of 2
##  $ src:List of 2
##   ..$ con  :Formal class &#39;PqConnection&#39; [package &quot;RPostgres&quot;] with 3 slots
##   .. .. ..@ ptr     :&lt;externalptr&gt; 
##   .. .. ..@ bigint  : chr &quot;integer64&quot;
##   .. .. ..@ typnames:&#39;data.frame&#39;:   437 obs. of  2 variables:
##   .. .. .. ..$ oid    : int [1:437] 16 17 18 19 20 21 22 23 24 25 ...
##   .. .. .. ..$ typname: chr [1:437] &quot;bool&quot; &quot;bytea&quot; &quot;char&quot; &quot;name&quot; ...
##   ..$ disco: NULL
##   ..- attr(*, &quot;class&quot;)= chr [1:4] &quot;src_PqConnection&quot; &quot;src_dbi&quot; &quot;src_sql&quot; &quot;src&quot;
##  $ ops:List of 2
##   ..$ x   : &#39;ident&#39; chr &quot;rental&quot;
##   ..$ vars: chr [1:7] &quot;rental_id&quot; &quot;rental_date&quot; &quot;inventory_id&quot; &quot;customer_id&quot; ...
##   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;op_base_remote&quot; &quot;op_base&quot; &quot;op&quot;
##  - attr(*, &quot;class&quot;)= chr [1:5] &quot;tbl_PqConnection&quot; &quot;tbl_dbi&quot; &quot;tbl_sql&quot; &quot;tbl_lazy&quot; ...</code></pre>
<p>It has only <em>two</em> rows! The first row contains all the information in the <code>con</code> object, which contains information about all the tables and objects in the database:</p>
<pre class="sourceCode r"><code class="sourceCode r">rental_table<span class="op">$</span>src<span class="op">$</span>con<span class="op">@</span>typnames<span class="op">$</span>typname[<span class="dv">380</span><span class="op">:</span><span class="dv">437</span>]</code></pre>
<pre><code>##  [1] &quot;customer&quot;                    &quot;_customer&quot;                  
##  [3] &quot;actor_actor_id_seq&quot;          &quot;actor&quot;                      
##  [5] &quot;_actor&quot;                      &quot;category_category_id_seq&quot;   
##  [7] &quot;category&quot;                    &quot;_category&quot;                  
##  [9] &quot;film_film_id_seq&quot;            &quot;film&quot;                       
## [11] &quot;_film&quot;                       &quot;pg_toast_16434&quot;             
## [13] &quot;film_actor&quot;                  &quot;_film_actor&quot;                
## [15] &quot;film_category&quot;               &quot;_film_category&quot;             
## [17] &quot;actor_info&quot;                  &quot;_actor_info&quot;                
## [19] &quot;address_address_id_seq&quot;      &quot;address&quot;                    
## [21] &quot;_address&quot;                    &quot;city_city_id_seq&quot;           
## [23] &quot;city&quot;                        &quot;_city&quot;                      
## [25] &quot;country_country_id_seq&quot;      &quot;country&quot;                    
## [27] &quot;_country&quot;                    &quot;customer_list&quot;              
## [29] &quot;_customer_list&quot;              &quot;film_list&quot;                  
## [31] &quot;_film_list&quot;                  &quot;inventory_inventory_id_seq&quot; 
## [33] &quot;inventory&quot;                   &quot;_inventory&quot;                 
## [35] &quot;language_language_id_seq&quot;    &quot;language&quot;                   
## [37] &quot;_language&quot;                   &quot;nicer_but_slower_film_list&quot; 
## [39] &quot;_nicer_but_slower_film_list&quot; &quot;payment_payment_id_seq&quot;     
## [41] &quot;payment&quot;                     &quot;_payment&quot;                   
## [43] &quot;rental_rental_id_seq&quot;        &quot;rental&quot;                     
## [45] &quot;_rental&quot;                     &quot;sales_by_film_category&quot;     
## [47] &quot;_sales_by_film_category&quot;     &quot;staff_staff_id_seq&quot;         
## [49] &quot;staff&quot;                       &quot;_staff&quot;                     
## [51] &quot;pg_toast_16529&quot;              &quot;store_store_id_seq&quot;         
## [53] &quot;store&quot;                       &quot;_store&quot;                     
## [55] &quot;sales_by_store&quot;              &quot;_sales_by_store&quot;            
## [57] &quot;staff_list&quot;                  &quot;_staff_list&quot;</code></pre>
<p>The second row contains a list of the columns in the <code>rental</code> table, among other things:</p>
<pre class="sourceCode r"><code class="sourceCode r">rental_table<span class="op">$</span>ops<span class="op">$</span>vars</code></pre>
<pre><code>## [1] &quot;rental_id&quot;    &quot;rental_date&quot;  &quot;inventory_id&quot; &quot;customer_id&quot; 
## [5] &quot;return_date&quot;  &quot;staff_id&quot;     &quot;last_update&quot;</code></pre>
<p><code>rental_table</code> holds information needed to get the data from the ‘rental’ table, but <code>rental_table</code> does not hold the data itself. In the following sections, we will examine more closely this relationship between the <code>rental_table</code> object and the data in the database’s ‘rental’ table.</p>
</div>
</div>
<div id="when-does-a-lazy-query-trigger-data-retrieval" class="section level2">
<h2><span class="header-section-number">10.4</span> When does a lazy query trigger data retrieval?</h2>
<div id="create-a-black-box-query-for-experimentation" class="section level3">
<h3><span class="header-section-number">10.4.1</span> Create a black box query for experimentation</h3>
<p>To illustrate the different issues involved in data retrieval, we create more connection objects to link to two other tables.</p>
<pre class="sourceCode r"><code class="sourceCode r">staff_table &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tbl</span>(con, <span class="st">&quot;staff&quot;</span>) </code></pre>
<p>The ‘staff’ table has 2 rows.</p>
<pre class="sourceCode r"><code class="sourceCode r">customer_table &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tbl</span>(con, <span class="st">&quot;customer&quot;</span>) </code></pre>
<p>The ‘customer’ table has 599 rows.</p>
<p>Here is a typical string of <code>dplyr</code> verbs strung together with the magrittr <code>%&gt;%</code> pipe command that will be used to tease out the several different behaviors that a lazy query has when passed to different R functions. This query joins three connection objects into a query we’ll call <code>Q</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">Q &lt;-<span class="st"> </span>rental_table <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(staff_table, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;staff_id&quot;</span> =<span class="st"> &quot;staff_id&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">staff_email =</span> email) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(customer_table, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;customer_id&quot;</span> =<span class="st"> &quot;customer_id&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">customer_email =</span> email) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(rental_date, staff_email, customer_email)</code></pre>
</div>
<div id="experiment-overview" class="section level3">
<h3><span class="header-section-number">10.4.2</span> Experiment overview</h3>
<p>Think of <code>Q</code> as a black box for the moment. The following examples will show how <code>Q</code> is interpreted differently by different functions.</p>
<p><strong>Notation</strong></p>
<ul>
<li><img src="screenshots/green-check.png" />: A single green check indicates that some rows are returned.</li>
<li><img src="screenshots/green-check.png" /> <img src="screenshots/green-check.png" />: Two green checks indicate that all the rows are returned.</li>
<li><img src="screenshots/red-x.png" />: The red X indicates that no rows are returned.</li>
</ul>
<blockquote>
<table>
<colgroup>
<col width="33%" />
<col width="66%" />
</colgroup>
<thead>
<tr class="header">
<th>R code</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_print"><code>Q %&gt;% print()</code></a></td>
<td><img src="screenshots/green-check.png" /> Prints x rows; same as just entering <code>Q</code></td>
</tr>
<tr class="even">
<td><a href="#Q-as-tibble"><code>Q %&gt;% dplyr::as_tibble()</code></a></td>
<td><img src="screenshots/green-check.png" /><img src="screenshots/green-check.png" /> Forces <code>Q</code> to be a tibble</td>
</tr>
<tr class="odd">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_head"><code>Q %&gt;% head()</code></a></td>
<td><img src="screenshots/green-check.png" /> Prints the first 6 rows</td>
</tr>
<tr class="even">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_tail"><code>Q %&gt;% tail()</code></a></td>
<td><img src="screenshots/red-x.png" /> Error: tail() is not supported by sql sources</td>
</tr>
<tr class="odd">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_length"><code>Q %&gt;% length()</code></a></td>
<td><img src="screenshots/red-x.png" /> Counts the rows in <code>Q</code></td>
</tr>
<tr class="even">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_str"><code>Q %&gt;% str()</code></a></td>
<td><img src="screenshots/red-x.png" />Shows the top 3 levels of the <strong>object</strong> <code>Q</code></td>
</tr>
<tr class="odd">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_nrow"><code>Q %&gt;% nrow()</code></a></td>
<td><img src="screenshots/red-x.png" /> <strong>Attempts</strong> to determine the number of rows</td>
</tr>
<tr class="even">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_tally"><code>Q %&gt;% dplyr::tally()</code></a></td>
<td><img src="screenshots/green-check.png" /> <img src="screenshots/green-check.png" /> Counts all the rows – on the dbms side</td>
</tr>
<tr class="odd">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_collect"><code>Q %&gt;% dplyr::collect(n = 20)</code></a></td>
<td><img src="screenshots/green-check.png" /> Prints 20 rows</td>
</tr>
<tr class="even">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_collect"><code>Q %&gt;% dplyr::collect(n = 20) %&gt;% head()</code></a></td>
<td><img src="screenshots/green-check.png" /> Prints 6 rows</td>
</tr>
<tr class="odd">
<td><a href="#lazy-q-show-query"><code>Q %&gt;% dplyr::show_query()</code></a></td>
<td><img src="screenshots/red-x.png" /> <strong>Translates</strong> the lazy query object into SQL</td>
</tr>
<tr class="even">
<td><a href="chapter-lazy-evaluation-queries.html#lazy_q_build"><code>Qc &lt;- Q %&gt;% dplyr::count(customer_email, sort = TRUE)</code> <br /> <code>Qc</code></a></td>
<td><img src="screenshots/red-x.png" /> <strong>Extends</strong> the lazy query object</td>
</tr>
</tbody>
</table>
</blockquote>
<p>The next chapter will discuss how to build queries and how to explore intermediate steps. But first, the following subsections provide a more detailed discussion of each row in the preceding table.</p>
</div>
<div id="lazy_q_print" class="section level3">
<h3><span class="header-section-number">10.4.3</span> Q %&gt;% print()</h3>
<p>Remember that <code>Q %&gt;% print()</code> is equivalent to <code>print(Q)</code> and the same as just entering <code>Q</code> on the command line. We use the magrittr pipe operator here, because chaining functions highlights how the same object behaves differently in each use.</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">print</span>()</code></pre>
<pre><code>## # Source:   lazy query [?? x 3]
## # Database: postgres [postgres@localhost:5432/dvdrental]
##    rental_date         staff_email             customer_email              
##    &lt;dttm&gt;              &lt;chr&gt;                   &lt;chr&gt;                       
##  1 2005-05-24 22:54:33 Mike.Hillyer@sakilasta… tommy.collazo@sakilacustome…
##  2 2005-05-24 23:03:39 Mike.Hillyer@sakilasta… manuel.murrell@sakilacustom…
##  3 2005-05-24 23:04:41 Jon.Stephens@sakilasta… andrew.purdy@sakilacustomer…
##  4 2005-05-24 23:05:21 Mike.Hillyer@sakilasta… delores.hansen@sakilacustom…
##  5 2005-05-24 23:08:07 Mike.Hillyer@sakilasta… nelson.christenson@sakilacu…
##  6 2005-05-24 23:11:53 Jon.Stephens@sakilasta… cassandra.walters@sakilacus…
##  7 2005-05-24 23:31:46 Jon.Stephens@sakilasta… minnie.romero@sakilacustome…
##  8 2005-05-25 00:00:40 Mike.Hillyer@sakilasta… ellen.simpson@sakilacustome…
##  9 2005-05-25 00:02:21 Jon.Stephens@sakilasta… danny.isom@sakilacustomer.o…
## 10 2005-05-25 00:09:02 Jon.Stephens@sakilasta… april.burns@sakilacustomer.…
## # … with more rows</code></pre>
<p><img src="screenshots/green-check.png" /> R retrieves 10 observations and 3 columns. In its role as IDE, R has provided nicely formatted output that is similar to what it prints for a tibble, with descriptive information about the dataset and each column:</p>
<blockquote>
<p># Source: lazy query [?? x 3] </br >
# Database: postgres [<a href="mailto:postgres@localhost" class="email">postgres@localhost</a>:5432/dvdrental] </br >
rental_date staff_email customer_email
&lt;dttm&gt; &lt;chr&gt; &lt;chr&gt;</p>
</blockquote>
<p>R has not determined how many rows are left to retrieve as it shows with <code>[?? x 3]</code> and <code>... with more rows</code> in the data summary.</p>
</div>
<div id="lazy_q_as-tibble" class="section level3">
<h3><span class="header-section-number">10.4.4</span> Q %&gt;% dplyr::as_tibble()</h3>
<p><img src="screenshots/green-check.png" /> <img src="screenshots/green-check.png" /> In contrast to <code>print()</code>, the <code>as_tibble()</code> function causes R to download the whole table, using tibble’s default of displaying only the first 10 rows.</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">as_tibble</span>()</code></pre>
<pre><code>## # A tibble: 16,044 x 3
##    rental_date         staff_email             customer_email              
##    &lt;dttm&gt;              &lt;chr&gt;                   &lt;chr&gt;                       
##  1 2005-05-24 22:54:33 Mike.Hillyer@sakilasta… tommy.collazo@sakilacustome…
##  2 2005-05-24 23:03:39 Mike.Hillyer@sakilasta… manuel.murrell@sakilacustom…
##  3 2005-05-24 23:04:41 Jon.Stephens@sakilasta… andrew.purdy@sakilacustomer…
##  4 2005-05-24 23:05:21 Mike.Hillyer@sakilasta… delores.hansen@sakilacustom…
##  5 2005-05-24 23:08:07 Mike.Hillyer@sakilasta… nelson.christenson@sakilacu…
##  6 2005-05-24 23:11:53 Jon.Stephens@sakilasta… cassandra.walters@sakilacus…
##  7 2005-05-24 23:31:46 Jon.Stephens@sakilasta… minnie.romero@sakilacustome…
##  8 2005-05-25 00:00:40 Mike.Hillyer@sakilasta… ellen.simpson@sakilacustome…
##  9 2005-05-25 00:02:21 Jon.Stephens@sakilasta… danny.isom@sakilacustomer.o…
## 10 2005-05-25 00:09:02 Jon.Stephens@sakilasta… april.burns@sakilacustomer.…
## # … with 16,034 more rows</code></pre>
</div>
<div id="lazy_q_head" class="section level3">
<h3><span class="header-section-number">10.4.5</span> Q %&gt;% head()</h3>
<p><img src="screenshots/green-check.png" /> The <code>head()</code> function is very similar to print but has a different “<code>max.print</code>” value.</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre>
<pre><code>## # Source:   lazy query [?? x 3]
## # Database: postgres [postgres@localhost:5432/dvdrental]
##   rental_date         staff_email             customer_email               
##   &lt;dttm&gt;              &lt;chr&gt;                   &lt;chr&gt;                        
## 1 2005-05-24 22:54:33 Mike.Hillyer@sakilasta… tommy.collazo@sakilacustomer…
## 2 2005-05-24 23:03:39 Mike.Hillyer@sakilasta… manuel.murrell@sakilacustome…
## 3 2005-05-24 23:04:41 Jon.Stephens@sakilasta… andrew.purdy@sakilacustomer.…
## 4 2005-05-24 23:05:21 Mike.Hillyer@sakilasta… delores.hansen@sakilacustome…
## 5 2005-05-24 23:08:07 Mike.Hillyer@sakilasta… nelson.christenson@sakilacus…
## 6 2005-05-24 23:11:53 Jon.Stephens@sakilasta… cassandra.walters@sakilacust…</code></pre>
</div>
<div id="lazy_q_tail" class="section level3">
<h3><span class="header-section-number">10.4.6</span> Q %&gt;% tail()</h3>
<p><img src="screenshots/red-x.png" /> Produces an error, because <code>Q</code> does not hold all of the data, so it is not possible to list the last few items from the table:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">try</span>(
  Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>(),
  <span class="dt">silent =</span> <span class="ot">FALSE</span>,
  <span class="dt">outFile =</span> <span class="kw">stdout</span>()
)</code></pre>
<pre><code>## Error : tail() is not supported by sql sources</code></pre>
</div>
<div id="lazy_q_length" class="section level3">
<h3><span class="header-section-number">10.4.7</span> Q %&gt;% length()</h3>
<p><img src="screenshots/red-x.png" /> Because the <code>Q</code> object is relatively complex, using <code>str()</code> on it prints many lines. You can glimpse what’s going on with <code>length()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">length</span>()</code></pre>
<pre><code>## [1] 2</code></pre>
</div>
<div id="lazy_q_str" class="section level3">
<h3><span class="header-section-number">10.4.8</span> Q %&gt;% str()</h3>
<p><img src="screenshots/red-x.png" /> Looking inside shows some of what’s going on (three levels deep):</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>(<span class="dt">max.level =</span> <span class="dv">3</span>) </code></pre>
<pre><code>## List of 2
##  $ src:List of 2
##   ..$ con  :Formal class &#39;PqConnection&#39; [package &quot;RPostgres&quot;] with 3 slots
##   ..$ disco: NULL
##   ..- attr(*, &quot;class&quot;)= chr [1:4] &quot;src_PqConnection&quot; &quot;src_dbi&quot; &quot;src_sql&quot; &quot;src&quot;
##  $ ops:List of 4
##   ..$ name: chr &quot;select&quot;
##   ..$ x   :List of 4
##   .. ..$ name: chr &quot;rename&quot;
##   .. ..$ x   :List of 4
##   .. .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;op_join&quot; &quot;op_double&quot; &quot;op&quot;
##   .. ..$ dots:List of 1
##   .. ..$ args: list()
##   .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;op_rename&quot; &quot;op_single&quot; &quot;op&quot;
##   ..$ dots:List of 3
##   .. ..$ : language ~rental_date
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x7fb8a2bff6a8&gt; 
##   .. ..$ : language ~staff_email
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x7fb8a2bff6a8&gt; 
##   .. ..$ : language ~customer_email
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x7fb8a2bff6a8&gt; 
##   .. ..- attr(*, &quot;class&quot;)= chr &quot;quosures&quot;
##   ..$ args: list()
##   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;op_select&quot; &quot;op_single&quot; &quot;op&quot;
##  - attr(*, &quot;class&quot;)= chr [1:5] &quot;tbl_PqConnection&quot; &quot;tbl_dbi&quot; &quot;tbl_sql&quot; &quot;tbl_lazy&quot; ...</code></pre>
</div>
<div id="lazy_q_nrow" class="section level3">
<h3><span class="header-section-number">10.4.9</span> Q %&gt;% nrow()</h3>
<p><img src="screenshots/red-x.png" /> Notice the difference between <code>nrow()</code> and <code>tally()</code>. The <code>nrow</code> functions returns <code>NA</code> and does not execute a query:</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</code></pre>
<pre><code>## [1] NA</code></pre>
</div>
<div id="lazy_q_tally" class="section level3">
<h3><span class="header-section-number">10.4.10</span> Q %&gt;% dplyr::tally()</h3>
<p><img src="screenshots/green-check.png" /> The <code>tally</code> function actually counts all the rows.</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tally</span>()</code></pre>
<pre><code>## # Source:   lazy query [?? x 1]
## # Database: postgres [postgres@localhost:5432/dvdrental]
##   n              
##   &lt;S3: integer64&gt;
## 1 16044</code></pre>
<p>The <code>nrow()</code> function knows that <code>Q</code> is a list. On the other hand, the <code>tally()</code> function tells SQL to go count all the rows. Notice that <code>Q</code> results in 16,044 rows – the same number of rows as <code>rental</code>.</p>
</div>
<div id="lazy_q_collect" class="section level3">
<h3><span class="header-section-number">10.4.11</span> Q %&gt;% dplyr::collect()</h3>
<p><img src="screenshots/green-check.png" /> The dplyr::<a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a> function triggers a call to the <code>DBI:dbFetch()</code> function behind the scenes, which forces R to download a specified number of rows:</p>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">collect</span>(<span class="dt">n =</span> <span class="dv">20</span>)</code></pre>
<pre><code>## # A tibble: 20 x 3
##    rental_date         staff_email             customer_email              
##    &lt;dttm&gt;              &lt;chr&gt;                   &lt;chr&gt;                       
##  1 2005-05-24 22:54:33 Mike.Hillyer@sakilasta… tommy.collazo@sakilacustome…
##  2 2005-05-24 23:03:39 Mike.Hillyer@sakilasta… manuel.murrell@sakilacustom…
##  3 2005-05-24 23:04:41 Jon.Stephens@sakilasta… andrew.purdy@sakilacustomer…
##  4 2005-05-24 23:05:21 Mike.Hillyer@sakilasta… delores.hansen@sakilacustom…
##  5 2005-05-24 23:08:07 Mike.Hillyer@sakilasta… nelson.christenson@sakilacu…
##  6 2005-05-24 23:11:53 Jon.Stephens@sakilasta… cassandra.walters@sakilacus…
##  7 2005-05-24 23:31:46 Jon.Stephens@sakilasta… minnie.romero@sakilacustome…
##  8 2005-05-25 00:00:40 Mike.Hillyer@sakilasta… ellen.simpson@sakilacustome…
##  9 2005-05-25 00:02:21 Jon.Stephens@sakilasta… danny.isom@sakilacustomer.o…
## 10 2005-05-25 00:09:02 Jon.Stephens@sakilasta… april.burns@sakilacustomer.…
## 11 2005-05-25 00:19:27 Jon.Stephens@sakilasta… deanna.byrd@sakilacustomer.…
## 12 2005-05-25 00:22:55 Mike.Hillyer@sakilasta… raymond.mcwhorter@sakilacus…
## 13 2005-05-25 00:31:15 Mike.Hillyer@sakilasta… theodore.culp@sakilacustome…
## 14 2005-05-25 00:39:22 Mike.Hillyer@sakilasta… ronald.weiner@sakilacustome…
## 15 2005-05-25 00:43:11 Jon.Stephens@sakilasta… steven.curley@sakilacustome…
## 16 2005-05-25 01:06:36 Mike.Hillyer@sakilasta… isaac.oglesby@sakilacustome…
## 17 2005-05-25 01:10:47 Jon.Stephens@sakilasta… ruth.martinez@sakilacustome…
## 18 2005-05-25 01:17:24 Mike.Hillyer@sakilasta… ronnie.ricketts@sakilacusto…
## 19 2005-05-25 01:48:41 Jon.Stephens@sakilasta… roberta.harper@sakilacustom…
## 20 2005-05-25 01:59:46 Jon.Stephens@sakilasta… craig.morrell@sakilacustome…</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">collect</span>(<span class="dt">n =</span> <span class="dv">20</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre>
<pre><code>## # A tibble: 6 x 3
##   rental_date         staff_email             customer_email               
##   &lt;dttm&gt;              &lt;chr&gt;                   &lt;chr&gt;                        
## 1 2005-05-24 22:54:33 Mike.Hillyer@sakilasta… tommy.collazo@sakilacustomer…
## 2 2005-05-24 23:03:39 Mike.Hillyer@sakilasta… manuel.murrell@sakilacustome…
## 3 2005-05-24 23:04:41 Jon.Stephens@sakilasta… andrew.purdy@sakilacustomer.…
## 4 2005-05-24 23:05:21 Mike.Hillyer@sakilasta… delores.hansen@sakilacustome…
## 5 2005-05-24 23:08:07 Mike.Hillyer@sakilasta… nelson.christenson@sakilacus…
## 6 2005-05-24 23:11:53 Jon.Stephens@sakilasta… cassandra.walters@sakilacust…</code></pre>
<p>The <code>dplyr::collect</code> function triggers the creation of a tibble and controls the number of rows that the DBMS sends to R. Notice that <code>head</code> only prints 6 of the 20 rows that R has retrieved.</p>
<p>If you do not provide a value for the <code>n</code> argument, <em>all</em> of the rows will be retrieved into your R workspace.</p>
</div>
<div id="lazy_q_show-query" class="section level3">
<h3><span class="header-section-number">10.4.12</span> Q %&gt;% dplyr::show_query()</h3>
<pre class="sourceCode r"><code class="sourceCode r">Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">show_query</span>()</code></pre>
<pre><code>## &lt;SQL&gt;
## SELECT &quot;rental_date&quot;, &quot;staff_email&quot;, &quot;customer_email&quot;
## FROM (SELECT &quot;rental_id&quot;, &quot;rental_date&quot;, &quot;inventory_id&quot;, &quot;customer_id&quot;, &quot;return_date&quot;, &quot;staff_id&quot;, &quot;last_update.x&quot;, &quot;first_name.x&quot;, &quot;last_name.x&quot;, &quot;address_id.x&quot;, &quot;staff_email&quot;, &quot;store_id.x&quot;, &quot;active.x&quot;, &quot;username&quot;, &quot;password&quot;, &quot;last_update.y&quot;, &quot;picture&quot;, &quot;store_id.y&quot;, &quot;first_name.y&quot;, &quot;last_name.y&quot;, &quot;email&quot; AS &quot;customer_email&quot;, &quot;address_id.y&quot;, &quot;activebool&quot;, &quot;create_date&quot;, &quot;last_update&quot;, &quot;active.y&quot;
## FROM (SELECT &quot;TBL_LEFT&quot;.&quot;rental_id&quot; AS &quot;rental_id&quot;, &quot;TBL_LEFT&quot;.&quot;rental_date&quot; AS &quot;rental_date&quot;, &quot;TBL_LEFT&quot;.&quot;inventory_id&quot; AS &quot;inventory_id&quot;, &quot;TBL_LEFT&quot;.&quot;customer_id&quot; AS &quot;customer_id&quot;, &quot;TBL_LEFT&quot;.&quot;return_date&quot; AS &quot;return_date&quot;, &quot;TBL_LEFT&quot;.&quot;staff_id&quot; AS &quot;staff_id&quot;, &quot;TBL_LEFT&quot;.&quot;last_update.x&quot; AS &quot;last_update.x&quot;, &quot;TBL_LEFT&quot;.&quot;first_name&quot; AS &quot;first_name.x&quot;, &quot;TBL_LEFT&quot;.&quot;last_name&quot; AS &quot;last_name.x&quot;, &quot;TBL_LEFT&quot;.&quot;address_id&quot; AS &quot;address_id.x&quot;, &quot;TBL_LEFT&quot;.&quot;staff_email&quot; AS &quot;staff_email&quot;, &quot;TBL_LEFT&quot;.&quot;store_id&quot; AS &quot;store_id.x&quot;, &quot;TBL_LEFT&quot;.&quot;active&quot; AS &quot;active.x&quot;, &quot;TBL_LEFT&quot;.&quot;username&quot; AS &quot;username&quot;, &quot;TBL_LEFT&quot;.&quot;password&quot; AS &quot;password&quot;, &quot;TBL_LEFT&quot;.&quot;last_update.y&quot; AS &quot;last_update.y&quot;, &quot;TBL_LEFT&quot;.&quot;picture&quot; AS &quot;picture&quot;, &quot;TBL_RIGHT&quot;.&quot;store_id&quot; AS &quot;store_id.y&quot;, &quot;TBL_RIGHT&quot;.&quot;first_name&quot; AS &quot;first_name.y&quot;, &quot;TBL_RIGHT&quot;.&quot;last_name&quot; AS &quot;last_name.y&quot;, &quot;TBL_RIGHT&quot;.&quot;email&quot; AS &quot;email&quot;, &quot;TBL_RIGHT&quot;.&quot;address_id&quot; AS &quot;address_id.y&quot;, &quot;TBL_RIGHT&quot;.&quot;activebool&quot; AS &quot;activebool&quot;, &quot;TBL_RIGHT&quot;.&quot;create_date&quot; AS &quot;create_date&quot;, &quot;TBL_RIGHT&quot;.&quot;last_update&quot; AS &quot;last_update&quot;, &quot;TBL_RIGHT&quot;.&quot;active&quot; AS &quot;active.y&quot;
##   FROM (SELECT &quot;rental_id&quot;, &quot;rental_date&quot;, &quot;inventory_id&quot;, &quot;customer_id&quot;, &quot;return_date&quot;, &quot;staff_id&quot;, &quot;last_update.x&quot;, &quot;first_name&quot;, &quot;last_name&quot;, &quot;address_id&quot;, &quot;email&quot; AS &quot;staff_email&quot;, &quot;store_id&quot;, &quot;active&quot;, &quot;username&quot;, &quot;password&quot;, &quot;last_update.y&quot;, &quot;picture&quot;
## FROM (SELECT &quot;TBL_LEFT&quot;.&quot;rental_id&quot; AS &quot;rental_id&quot;, &quot;TBL_LEFT&quot;.&quot;rental_date&quot; AS &quot;rental_date&quot;, &quot;TBL_LEFT&quot;.&quot;inventory_id&quot; AS &quot;inventory_id&quot;, &quot;TBL_LEFT&quot;.&quot;customer_id&quot; AS &quot;customer_id&quot;, &quot;TBL_LEFT&quot;.&quot;return_date&quot; AS &quot;return_date&quot;, &quot;TBL_LEFT&quot;.&quot;staff_id&quot; AS &quot;staff_id&quot;, &quot;TBL_LEFT&quot;.&quot;last_update&quot; AS &quot;last_update.x&quot;, &quot;TBL_RIGHT&quot;.&quot;first_name&quot; AS &quot;first_name&quot;, &quot;TBL_RIGHT&quot;.&quot;last_name&quot; AS &quot;last_name&quot;, &quot;TBL_RIGHT&quot;.&quot;address_id&quot; AS &quot;address_id&quot;, &quot;TBL_RIGHT&quot;.&quot;email&quot; AS &quot;email&quot;, &quot;TBL_RIGHT&quot;.&quot;store_id&quot; AS &quot;store_id&quot;, &quot;TBL_RIGHT&quot;.&quot;active&quot; AS &quot;active&quot;, &quot;TBL_RIGHT&quot;.&quot;username&quot; AS &quot;username&quot;, &quot;TBL_RIGHT&quot;.&quot;password&quot; AS &quot;password&quot;, &quot;TBL_RIGHT&quot;.&quot;last_update&quot; AS &quot;last_update.y&quot;, &quot;TBL_RIGHT&quot;.&quot;picture&quot; AS &quot;picture&quot;
##   FROM &quot;rental&quot; AS &quot;TBL_LEFT&quot;
##   LEFT JOIN &quot;staff&quot; AS &quot;TBL_RIGHT&quot;
##   ON (&quot;TBL_LEFT&quot;.&quot;staff_id&quot; = &quot;TBL_RIGHT&quot;.&quot;staff_id&quot;)
## ) &quot;qzdwvvvtzq&quot;) &quot;TBL_LEFT&quot;
##   LEFT JOIN &quot;customer&quot; AS &quot;TBL_RIGHT&quot;
##   ON (&quot;TBL_LEFT&quot;.&quot;customer_id&quot; = &quot;TBL_RIGHT&quot;.&quot;customer_id&quot;)
## ) &quot;rnitnthkfz&quot;) &quot;ohetoyqsmw&quot;</code></pre>
<p>Hand-written SQL code to do the same job will probably look a lot nicer and could be more efficient, but functionally <code>dplyr</code> does the job.</p>
</div>
<div id="lazy_q_build" class="section level3">
<h3><span class="header-section-number">10.4.13</span> Qc &lt;- Q %&gt;% dplyr::count(customer_email)</h3>
<p><img src="screenshots/red-x.png" /> Until <code>Q</code> is executed, we can add to it. This behavior is the basis for a useful debugging and development process where queries are built up incrementally.</p>
<pre class="sourceCode r"><code class="sourceCode r">Qc &lt;-<span class="st"> </span>Q <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">count</span>(customer_email, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</code></pre>
<p><img src="screenshots/green-check.png" /> When all the accumulated <code>dplyr</code> verbs are executed, they are submitted to the dbms and the number of rows that are returned follow the same rules as discussed above.</p>
<pre class="sourceCode r"><code class="sourceCode r">Qc</code></pre>
<pre><code>## # Source:     lazy query [?? x 2]
## # Database:   postgres [postgres@localhost:5432/dvdrental]
## # Ordered by: desc(n)
##    customer_email                    n              
##    &lt;chr&gt;                             &lt;S3: integer64&gt;
##  1 eleanor.hunt@sakilacustomer.org   46             
##  2 karl.seal@sakilacustomer.org      45             
##  3 clara.shaw@sakilacustomer.org     42             
##  4 marcia.dean@sakilacustomer.org    42             
##  5 tammy.sanders@sakilacustomer.org  41             
##  6 wesley.bull@sakilacustomer.org    40             
##  7 sue.peters@sakilacustomer.org     40             
##  8 marion.snyder@sakilacustomer.org  39             
##  9 rhonda.kennedy@sakilacustomer.org 39             
## 10 tim.cary@sakilacustomer.org       39             
## # … with more rows</code></pre>
<p>See more examples of lazy execution <a href="https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html">here</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">DBI<span class="op">::</span><span class="kw">dbDisconnect</span>(con)
sqlpetr<span class="op">::</span><span class="kw">sp_docker_stop</span>(<span class="st">&quot;sql-pet&quot;</span>)</code></pre>
</div>
</div>
<div id="other-resources" class="section level2">
<h2><span class="header-section-number">10.5</span> Other resources</h2>
<ul>
<li>Benjamin S. Baumer. 2017. A Grammar for Reproducible and Painless Extract-Transform-Load Operations on Medium Data. <a href="https://arxiv.org/abs/1708.07073">https://arxiv.org/abs/1708.07073</a></li>
<li>dplyr Reference documentation: Remote tables. <a href="https://dplyr.tidyverse.org/reference/index.html#section-remote-tables">https://dplyr.tidyverse.org/reference/index.html#section-remote-tables</a></li>
<li>Data Carpentry. SQL Databases and R. <a href="https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html">https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html</a></li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="https://www.techopedia.com/definition/1245/structured-query-language-sql" class="uri">https://www.techopedia.com/definition/1245/structured-query-language-sql</a><a href="chapter-lazy-evaluation-queries.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Lazy-loading" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-ints.html#Lazy-loading</a><a href="chapter-lazy-evaluation-queries.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><a href="https://colinfay.me/lazyeval/" class="uri">https://colinfay.me/lazyeval/</a><a href="chapter-lazy-evaluation-queries.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p><a href="http://adv-r.had.co.nz/Functions.html#function-arguments" class="uri">http://adv-r.had.co.nz/Functions.html#function-arguments</a><a href="chapter-lazy-evaluation-queries.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p><a href="https://colinfay.me/tidyeval-1/" class="uri">https://colinfay.me/tidyeval-1/</a><a href="chapter-lazy-evaluation-queries.html#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p><a href="https://www.quora.com/What-is-a-lazy-query" class="uri">https://www.quora.com/What-is-a-lazy-query</a><a href="chapter-lazy-evaluation-queries.html#fnref6" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-dbms-queries-intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-dbi-package-sql.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/smithjd/sql-pet/edit/master/090-lazy-evalutation-and-downloading.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
