---
title: "R, Databases and Docker"
author: "M. Edward (Ed) Borasky, editor"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "A collection of tutorials for integrating R with databases using Docker"
---

# Introduction

## Why integrate R with databases using Docker?

* Large data stores in organizations are stored in databases that have specific access constraints and  structural characteristics.
* Learning to navigate the interface (passwords, packages, etc.) between R and the database is difficult to simulate outside corporate walls.
* R users frequently need to make sense of complex data structures using diagnostic techniques that shuld not be reinvented (and so would benefit from more public instruction and  commentary).
* Rarely upload or write to the organization's database.
* Docker is a relatively easy way to simulate the relationship between an R/Rstudio session and database -- all on on a single machine.
* You want to run PostgresSQL on a Docker container, avoiding any OS or system dependencies that might come up. 

Noam Ross's "[Docker for the UseR](https://nyhackr.blob.core.windows.net/presentations/Docker-for-the-UseR_Noam-Ross.pdf)" suggests that there are four distinct use-cases for useRs.  This tutorial explores #2:

1. Make a fixed working environment
2. Access a service outside of R **(e.g., Postgres)**
3. Create an R based service
4. Send our compute job somewhere else

## Setup

Here is how R and Docker fit on your operating system in this tutorial:
    
![R and Docker](./screenshots/r-and-docker.png)
(This diagram needs to be updated as our directory structure evolves.)

## Who are we?

* M. Edward (Ed) Borasky - [\@znmeb](https://github.com/znmeb)
* John David Smith - [\@smithjd](https://github.com/smithjd)
* Scott Came - [\@scottcame](https://github.com/scottcame)
* Ian Franz - [\@ianfrantz](https://github.com/ianfrantz)
* Sophie Yang - [\@SophieMYang](https://github.com/SophieMYang)
* Jim Tyhurst - [\@jimtyhurst](https://github.com/jimtyhurst)
* Paul Refalo - [\@paulrefalo](https://github.com/paulrefalo)

## Prerequisites
You will need

* A computer running Windows, MacOS, or Linux. Any Linux distro that will run Docker Community Edition, R and RStudio will work,
* R, and
* Docker hosting.

The database we use is PostgreSQL 10, but you do not need to install that - it's installed via a Docker image. RStudio 1.2 is highly recommended but not required.

## Install Docker

Install Docker.  Note that this can be tricky.  

  + [On a Mac](https://docs.docker.com/docker-for-mac/install/)
  + [On UNIX flavors](https://docs.docker.com/install/#supported-platforms)
  + For Windows, [consider these issues and follow these instructions](https://smithjd.github.io/sql-pet/docker-hosting-for-windows.html).

## Download the repo

First step: download [this repo](https://github.com/smithjd/sql-pet).  It contains source code to build a Docker container that has the dvdrental database in Postgress and shows how to interact with the database from R.

```{r include=FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(),
  'docker',
  'tidyverse'
), 'packages.bib')
```
